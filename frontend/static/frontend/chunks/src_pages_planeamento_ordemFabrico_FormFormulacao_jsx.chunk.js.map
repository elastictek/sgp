{"version":3,"file":"chunks/src_pages_planeamento_ordemFabrico_FormFormulacao_jsx.chunk.js","mappings":"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","sources":["webpack://sgp/./src/pages/planeamento/formulacao/FormFormulacaoUpsert.jsx","webpack://sgp/./src/pages/planeamento/ordemFabrico/FormFormulacao.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, useRef, useContext } from 'react';\r\nimport { createUseStyles } from 'react-jss';\r\nimport styled from 'styled-components';\r\nimport dayjs from 'dayjs';\r\nimport Joi from 'joi';\r\nimport { fetch, fetchPost } from \"utils/fetch\";\r\nimport { API_URL } from \"config\";\r\nimport { getSchema } from \"utils/schemaValidator\";\r\nimport { FormLayout, Field, FieldSet, FieldItem, AlertsContainer, Item, SelectField, CheckboxField, HorizontalRule, VerticalSpace, InputAddon, SelectDebounceField } from \"components/formLayout\";\r\nimport AlertMessages from \"components/alertMessages\";\r\nimport IconButton from \"components/iconButton\";\r\nimport ResultMessage from 'components/resultMessage';\r\nimport Portal from \"components/portal\";\r\nimport { Input, Space, Form, Button, InputNumber, DatePicker } from \"antd\";\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport { MdAdjust, MdAssignmentReturned } from 'react-icons/md';\r\nimport { CgCloseO } from 'react-icons/cg';\r\nimport { DATE_FORMAT, DATETIME_FORMAT, FORMULACAO_EXTRUSORAS_COD, FORMULACAO_EXTRUSORAS_VAL, FORMULACAO_TOLERANCIA, FORMULACAO_PONDERACAO_EXTR, FORMULACAO_MANGUEIRAS } from 'config';\r\nimport { OFabricoContext } from '../ordemFabrico/FormOFabricoValidar';\r\n\r\nconst schema = (keys, excludeKeys) => {\r\n    return getSchema({\r\n        formu_materiasprimas_A: Joi.array().label(\"Matérias Primas da Extrusora A\").min(1).required(),\r\n        formu_materiasprimas_BC: Joi.array().label(\"Matérias Primas das Extrusoras B & C\").min(1).required(),\r\n        matprima_cod_A: Joi.string().label(\"Matéria Prima\").required(),\r\n        densidade_A: Joi.number().label(\"Densidade\").required(),\r\n        /* mangueira_A: Joi.string().label(\"Mangueira Extrusora A\").required(), */\r\n        arranque_A: Joi.number().label(\"Arranque\").required(),\r\n        matprima_cod_BC: Joi.string().label(\"Matéria Prima\").required(),\r\n        densidade_BC: Joi.number().label(\"Densidade\").required(),\r\n        arranque_BC: Joi.number().label(\"Arranque\").required()\r\n       /*  mangueira_BC: Joi.string().label(\"Mangueira Extrusora BC\").required() */\r\n    }, keys, excludeKeys).unknown(true);\r\n}\r\n\r\nconst setId = (id) => {\r\n    if (id) {\r\n        return { key: \"update\", values: { id } };\r\n    }\r\n    return { key: \"insert\", values: {} };\r\n}\r\n\r\nconst append = (value, suffix = '', prefix = '', onUndefined = '') => {\r\n    if (value) {\r\n        return `${prefix}${value}${suffix}`;\r\n    }\r\n    return onUndefined;\r\n}\r\n\r\nconst HeaderA = ({ backgroundColor = \"#f5f5f5\", color = \"#000\", border = \"solid 1px #d9d9d9\" }) => {\r\n    return (\r\n        <FieldSet wide={16} layout=\"horizontal\" margin={false}\r\n            style={{ backgroundColor: `${backgroundColor}`, color: `${color}`, fontWeight: 500, textAlign: \"center\" }}\r\n            field={{ noItemWrap: true, label: { enabled: false } }}\r\n        >\r\n            <FieldSet wide={7} margin={false}\r\n                field={{\r\n                    wide: [13, 3],\r\n                    style: { border, borderLeft: \"none\", alignSelf: \"stretch\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\" }\r\n                }}\r\n            >\r\n                <Field style={{ border, alignSelf: \"stretch\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\" }} >Matérias Primas</Field>\r\n                <Field >Densidade</Field>\r\n            </FieldSet>\r\n            <FieldSet margin={false} wide={9} layout=\"vertical\"\r\n                field={{ style: { border, borderLeft: \"none\" } }}\r\n            >\r\n                <FieldSet field={{ wide: [16] }} margin={false}>\r\n                    <Field>Distribuição por Extrusora</Field>\r\n                </FieldSet>\r\n                <FieldSet margin={false}\r\n                    field={{\r\n                        wide: [/* 3,  */4, 4, 4, 3, 1/* , 2, 3 */],\r\n                        style: { fontSize: \"10px\", border, borderLeft: \"none\", borderTop: \"none\", fontWeight: 400 }\r\n                    }}\r\n                >\r\n                    {/* <Field>Doseador</Field> */}\r\n                    <Field>%A</Field>\r\n                    <Field>Arranque</Field>\r\n                    <Field>Tolerância</Field>\r\n                    <Field>% Global</Field>\r\n                    <Field></Field>\r\n                    {/* <Field>Checklist</Field>\r\n                    <Field>Data/Hora</Field> */}\r\n                </FieldSet>\r\n            </FieldSet>\r\n        </FieldSet>\r\n    );\r\n}\r\n\r\nconst HeaderBC = ({ backgroundColor = \"#f5f5f5\", color = \"#000\", border = \"solid 1px #d9d9d9\" }) => {\r\n    return (\r\n        <FieldSet wide={16} layout=\"horizontal\" margin={false}\r\n            field={{ noItemWrap: true, label: { enabled: false } }}\r\n            style={{ fontSize: \"10px\", backgroundColor: `${backgroundColor}`, color: `${color}`, textAlign: \"center\" }}\r\n        >\r\n            <FieldSet wide={7} margin={false}\r\n                field={{\r\n                    wide: [13, 3],\r\n                    style: { border, borderLeft: \"none\" }\r\n                }}\r\n            >\r\n                <Field style={{ border }}></Field>\r\n                <Field></Field>\r\n            </FieldSet>\r\n            <FieldSet margin={false} wide={9}>\r\n                <FieldSet margin={false}\r\n                    field={{\r\n                        wide: [/* 3,  */4, 4, 4, 3, 1/*  2, 3 */],\r\n                        label: { enabled: false },\r\n                        style: { border, borderLeft: \"none\" }\r\n                    }}\r\n                >\r\n                    {/* <Field>Doseador</Field> */}\r\n                    <Field>%B e C</Field>\r\n                    <Field>Arranque</Field>\r\n                    <Field>Tolerância</Field>\r\n                    <Field>% Global</Field>\r\n                    <Field></Field>\r\n                    {/* <Field>Checklist</Field>\r\n                    <Field>Data/Hora</Field> */}\r\n                </FieldSet>\r\n            </FieldSet>\r\n        </FieldSet>\r\n    );\r\n}\r\n\r\nconst updateGlobals = ({ values = {}, adjust = { extrusora: null, index: null }, action = \"adjust\" }) => {\r\n    const { formu_materiasprimas_A: listA = [], formu_materiasprimas_BC: listBC = [], ...rest } = values;\r\n    let ponderacaoA = FORMULACAO_PONDERACAO_EXTR[0];\r\n    let ponderacaoBC = FORMULACAO_PONDERACAO_EXTR[1];\r\n    let globalA = 0;\r\n    let globalBC = 0;\r\n    let sumArranqueA = 0;\r\n    let sumArranqueBC = 0;\r\n\r\n    for (let [i, v] of listA.entries()) {\r\n        let arranque = (v.arranque_A ? v.arranque_A : 0);\r\n        let global = (ponderacaoA * arranque) / 100;\r\n        if ((action === \"adjust\" && adjust.extrusora !== 'A') || (action !== 'adjust') || (action === \"adjust\" && adjust.index !== i && adjust.extrusora === 'A')) {\r\n            globalA += global;\r\n            sumArranqueA += arranque;\r\n        }\r\n        v.global = global;\r\n    }\r\n    for (let [i, v] of listBC.entries()) {\r\n        let arranque = (v.arranque_BC ? v.arranque_BC : 0);\r\n        let global = (ponderacaoBC * arranque) / 100;\r\n        if ((action === \"adjust\" && adjust.extrusora !== 'BC') || (action !== 'adjust') || (action === \"adjust\" && adjust.index !== i && adjust.extrusora === 'BC')) {\r\n            globalBC += global;\r\n            sumArranqueBC += arranque;\r\n        }\r\n        v.global = global;\r\n    }\r\n\r\n    if (action === \"adjust\") {\r\n        if (adjust.extrusora === 'A') {\r\n            listA[adjust.index].arranque_A = (100 - sumArranqueA) < 0 ? 0 : (100 - sumArranqueA);\r\n            listA[adjust.index].global = (ponderacaoA * (listA[adjust.index].arranque_A)) / 100;\r\n            globalA += listA[adjust.index].global;\r\n        } else {\r\n            listBC[adjust.index].arranque_BC = (100 - sumArranqueBC) < 0 ? 0 : (100 - sumArranqueBC);\r\n            listBC[adjust.index].global = (ponderacaoBC * (listBC[adjust.index].arranque_BC)) / 100;\r\n            globalBC += listBC[adjust.index].global;\r\n        }\r\n    }\r\n\r\n    return { ...rest, formu_materiasprimas_A: listA, formu_materiasprimas_BC: listBC, totalGlobal: (globalA + globalBC) };\r\n}\r\n\r\nconst SubFormMateriasPrimas = ({ form, forInput, name, matPrimasLookup, sum = false, border = \"solid 1px #d9d9d9\", id }) => {\r\n\r\n    const adjust = (idx, extrusora) => {\r\n        const fieldValues = updateGlobals({ values: form.getFieldsValue(true), adjust: { extrusora, index: idx }, action: \"adjust\" });\r\n        form.setFieldsValue(fieldValues);\r\n    }\r\n\r\n    return (\r\n        <Form.List name={name}>\r\n            {(fields, { add, remove, move }) => {\r\n\r\n                const addRow = (fields) => {\r\n                    add({ [`tolerancia_${id}`]: FORMULACAO_TOLERANCIA, removeCtrl: true });\r\n                    /* add({ item_id: 1, item_paletesize: '970x970', item_numbobines: 10 }, 0); */\r\n                }\r\n                const removeRow = (fieldName, field) => {\r\n                    remove(fieldName);\r\n                }\r\n                const moveRow = (from, to) => {\r\n                    move(from, to);\r\n                }\r\n\r\n                return (\r\n                    <>\r\n\r\n                        {fields.map((field, index) => (\r\n\r\n                            <FieldSet key={field.key} wide={16} layout=\"horizontal\" margin={false} field={{ label: { enabled: false } }}>\r\n                                <FieldSet wide={7} margin={false}\r\n                                    field={{\r\n                                        wide: [13, 3],\r\n                                        style: { border: \"solid 1px #fff\", borderLeft: \"none\", fontWeight: \"10px\" }\r\n                                    }}\r\n                                >\r\n{/*                                     <Field name={[field.name, `mangueira_${id}`]}>\r\n                                        <SelectField size=\"small\" data={FORMULACAO_MANGUEIRAS[id]} keyField=\"key\" textField=\"key\"\r\n                                            optionsRender={(d, keyField, textField) => ({ label: `${d[textField]}`, value: d[keyField] })}\r\n                                        />\r\n                                    </Field> */}\r\n                                    <Field name={[field.name, `matprima_cod_${id}`]}>\r\n                                        <SelectField size=\"small\" data={matPrimasLookup} keyField=\"ITMREF_0\" textField=\"ITMDES1_0\"\r\n                                            optionsRender={(d, keyField, textField) => ({ label: `${d[textField]}`, value: d[keyField] })}\r\n                                            showSearch\r\n                                            filterOption={(input, option) => option.label.toLowerCase().indexOf(input.toLowerCase()) >= 0}\r\n                                        />\r\n                                    </Field>\r\n                                    <Field name={[field.name, `densidade_${id}`]}><InputNumber controls={false} size=\"small\" min={0} max={50} precision={3} step={.025} /></Field>\r\n                                </FieldSet>\r\n                                <FieldSet margin={false} wide={9}>\r\n                                    <FieldSet margin={false}\r\n                                        field={{\r\n                                            wide: [/* 3,  */4, 4, 4, 3, 1/* , 2, 3 */],\r\n                                            label: { enabled: false },\r\n                                            style: { border: \"solid 1px #fff\", borderLeft: \"none\", borderTop: \"none\" }\r\n                                        }}\r\n                                    >\r\n                                        {/* <Field name={[field.name, \"doseador\"]}><Input size=\"small\" /></Field> */}\r\n                                        <Field></Field>\r\n                                        <Field name={[field.name, `arranque_${id}`]}><InputNumber size=\"small\" controls={false} {...(forInput && { addonBefore: <IconButton onClick={() => adjust(index, id)}><MdAdjust /></IconButton> })} addonAfter={<b>%</b>} precision={2} min={0} max={100} /></Field>\r\n                                        <Field name={[field.name, `tolerancia_${id}`]}><InputNumber size=\"small\" controls={false} addonBefore=\"&plusmn;\" addonAfter={<b>%</b>} maxLength={4} precision={1} min={0} max={100} /></Field>\r\n                                        <Field style={{ textAlign: \"center\", border: \"solid 1px #fff\", borderLeft: \"none\", borderTop: \"none\" }}>{append(form.getFieldValue([name, field.name, \"global\"])?.toFixed(2), '%')}{/* <InputNumber size=\"small\" addonAfter={<b>%</b>} maxLength={4} min={0} max={100} /> */}</Field>\r\n                                        <FieldItem label={{ enabled: false }}>{forInput && <IconButton onClick={() => removeRow(field.name, field)} style={{ alignSelf: \"center\" }}><CgCloseO /></IconButton>}</FieldItem>\r\n                                        {/*<Field name={[field.name, \"checklist\"]}><CheckboxField /></Field>\r\n                                        <Field name={[field.name, \"check_datetime\"]}><DatePicker /></Field> */}\r\n                                    </FieldSet>\r\n                                </FieldSet>\r\n                            </FieldSet>\r\n\r\n                        ))}\r\n                        {(sum && form.getFieldValue(\"totalGlobal\") > 0) &&\r\n                            <FieldSet wide={16} layout=\"horizontal\" margin={false} field={{ label: { enabled: false } }}>\r\n                                <FieldSet wide={7} margin={false} />\r\n                                <FieldSet margin={false} wide={9}>\r\n                                    <FieldSet margin={false}\r\n                                        field={{\r\n                                            wide: [12, 4],\r\n                                            label: { enabled: false },\r\n                                            style: { border: \"solid 1px #fff\", borderLeft: \"none\", borderTop: \"none\" }\r\n                                        }}\r\n                                    >\r\n                                        <Field></Field>\r\n                                        <Field style={{ marginTop: \"4px\", textAlign: \"center\", fontWeight: 500, border }}>{append(form.getFieldValue(\"totalGlobal\").toFixed(2), '%')}</Field>\r\n                                    </FieldSet>\r\n                                </FieldSet>\r\n                            </FieldSet>\r\n                        }\r\n                        <FieldSet>\r\n                            {forInput && <Button type=\"dashed\" onClick={() => addRow(fields)} style={{ width: \"100%\" }}><PlusOutlined />Adicionar</Button>}\r\n                        </FieldSet>\r\n                    </>\r\n                );\r\n            }}\r\n        </Form.List>\r\n    );\r\n}\r\n\r\n\r\n\r\nconst LoadMateriasPrimasLookup = async (record) => {\r\n    const { data: { rows } } = await fetchPost({ url: `${API_URL}/materiasprimaslookup/`, filter: {} });\r\n    return rows;\r\n}\r\nconst loadCustomersLookup = async (value) => {\r\n    const { data: { rows } } = await fetchPost({ url: `${API_URL}/sellcustomerslookup/`, pagination: { limit: 10 }, filter: { [\"fmulti_customer\"]: `%${value.replaceAll(' ', '%%')}%` } });\r\n    return rows;\r\n}\r\n\r\n\r\n\r\nexport default ({ record, setFormTitle, parentRef, closeParent, parentReload, wrapForm = \"form\", forInput = true }) => {\r\n    const ctx = useContext(OFabricoContext);\r\n    const [form] = Form.useForm();\r\n    const [loading, setLoading] = useState(true);\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [changedValues, setChangedValues] = useState({});\r\n    const [formStatus, setFormStatus] = useState({ error: [], warning: [], info: [], success: [] });\r\n    const [guides, setGuides] = useState(false);\r\n    const [operation, setOperation] = useState(setId(record.formulacao_id));\r\n    const [resultMessage, setResultMessage] = useState({ status: \"none\" });\r\n    const [matPrimasLookup, setMatPrimasLookup] = useState([]);\r\n\r\n    const init = (lookup = false) => {\r\n        (async () => {\r\n            if (lookup) {\r\n                setMatPrimasLookup(await LoadMateriasPrimasLookup(record));\r\n            }\r\n            if (operation.key === \"update\") {\r\n                (setFormTitle) && setFormTitle({ title: `Editar Formulação` });\r\n                let formu_materiasprimas_A = record.formulacaoMatPrimas?.filter(v => (v.extrusora === 'A')).map(v => ({ global: v.vglobal, /* mangueira_A: v.mangueira, */ matprima_cod_A: v.matprima_cod, densidade_A: v.densidade, arranque_A: v.arranque, tolerancia_A: v.tolerancia, removeCtrl: true }));\r\n                let formu_materiasprimas_BC = record.formulacaoMatPrimas?.filter(v => (v.extrusora === 'BC')).map(v => ({ global: v.vglobal, /* mangueira_BC: v.mangueira, */ matprima_cod_BC: v.matprima_cod, densidade_BC: v.densidade, arranque_BC: v.arranque, tolerancia_BC: v.tolerancia, removeCtrl: true }));\r\n                form.setFieldsValue({ ...record.formulacao, formu_materiasprimas_A, formu_materiasprimas_BC, totalGlobal: 100 });\r\n            } else {\r\n                (setFormTitle) && setFormTitle({ title: `Nova Formulação ${ctx.item_cod}`, subTitle: `${ctx.item_nome}` });\r\n                form.setFieldsValue({\r\n                    extr0: FORMULACAO_EXTRUSORAS_COD[0], extr1: FORMULACAO_EXTRUSORAS_COD[1], extr2: FORMULACAO_EXTRUSORAS_COD[2], extr3: FORMULACAO_EXTRUSORAS_COD[3], extr4: FORMULACAO_EXTRUSORAS_COD[4],\r\n                    extr0_val: FORMULACAO_EXTRUSORAS_VAL[0], extr1_val: FORMULACAO_EXTRUSORAS_VAL[1], extr2_val: FORMULACAO_EXTRUSORAS_VAL[2], extr3_val: FORMULACAO_EXTRUSORAS_VAL[3], extr4_val: FORMULACAO_EXTRUSORAS_VAL[4]\r\n                });\r\n            }\r\n            setLoading(false);\r\n        })();\r\n    }\r\n\r\n    useEffect(() => {\r\n        init(true);\r\n        return (() => setMatPrimasLookup([]));\r\n    }, []);\r\n\r\n    const onValuesChange = (changedValues, { formu_materiasprimas_A: allA = [], formu_materiasprimas_BC: allBC = [], ...allValues }) => {\r\n        const formu_materiasprimas_A = allA.filter(v => v.removeCtrl === true);\r\n        const formu_materiasprimas_BC = allBC.filter(v => v.removeCtrl === true);\r\n        const fieldValues = updateGlobals({ values: { ...allValues, formu_materiasprimas_A, formu_materiasprimas_BC }, action: \"valueschange\" });\r\n        form.setFieldsValue(fieldValues);\r\n        setChangedValues(changedValues);\r\n    }\r\n\r\n    const onFinish = async (values) => {\r\n        const items = [];\r\n        const status = { error: [], warning: [], info: [], success: [] };\r\n        const msgKeys = [\"formu_materiasprimas_A\", \"formu_materiasprimas_BC\"];\r\n        const v = schema(false, [/* 'mangueira_A', */ 'matprima_cod_A', 'densidade_A', 'arranque_A', /* 'mangueira_BC', */ 'matprima_cod_BC', 'densidade_BC', 'arranque_BC']).validate(values, { abortEarly: false });\r\n        console.log(\"after\", values)\r\n        status.error = [...status.error, ...(v.error ? v.error?.details.filter((v) => msgKeys.includes(v.context.key)) : [])];\r\n        status.warning = [...status.warning, ...(v.warning ? v.warning?.details.filter((v) => msgKeys.includes(v.context.key)) : [])];\r\n        let fieldValues;\r\n        if (!v.error) {\r\n            fieldValues = updateGlobals({ values, action: \"finish\" });\r\n            /* let mA = fieldValues.formu_materiasprimas_A.map((v) => v.mangueira_A);\r\n            let mBC = fieldValues.formu_materiasprimas_BC.map((v) => v.mangueira_BC); */\r\n\r\n/*             if ((new Set(mA)).size !== mA.length) {\r\n                status.error.push({ message: \"As mangueiras na Extrusora A, não podem estar duplicadas!\" });\r\n            } else if ((new Set(mBC)).size !== mBC.length) {\r\n                status.error.push({ message: \"As mangueiras na Extrusora BC, não podem estar duplicadas!\" });\r\n            } */\r\n\r\n\r\n            let sumA = fieldValues.formu_materiasprimas_A.reduce((a, b) => a + (b[\"arranque_A\"] || 0), 0);\r\n            let sumBC = fieldValues.formu_materiasprimas_BC.reduce((a, b) => a + (b[\"arranque_BC\"] || 0), 0);\r\n\r\n            console.log(\"testeeeee\",Math.round(fieldValues.totalGlobal))\r\n            if (Math.round(fieldValues.totalGlobal) !== 100) {\r\n                status.error.push({ message: \"O Total Global das Matérias Primas tem de ser 100%!\" });\r\n            } else if (sumA !== 100) {\r\n                status.error.push({ message: \"O Total das Matérias Primas da Extrusora A tem de ser 100%!\" });\r\n            }\r\n            else if (sumBC !== 100) {\r\n                status.error.push({ message: \"O Total das Matérias Primas das Extrusoras B&C tem de ser 100%!\" });\r\n            }\r\n        }\r\n\r\n        if (status.error.length === 0 && fieldValues) {\r\n            for (let v of fieldValues?.formu_materiasprimas_A) {\r\n                let matprima_des = matPrimasLookup.find(val => val.ITMREF_0 === v.matprima_cod_A)?.ITMDES1_0;\r\n                items.push({\r\n                    tolerancia: v.tolerancia_A, arranque: v.arranque_A, vglobal: v.global,\r\n                    densidade: v.densidade_A, /* mangueira: v.mangueira_A, */ extrusora: 'A', matprima_cod: v.matprima_cod_A,\r\n                    matprima_des\r\n                });\r\n            }\r\n            for (let v of fieldValues?.formu_materiasprimas_BC) {\r\n                let matprima_des = matPrimasLookup.find(val => val.ITMREF_0 === v.matprima_cod_BC)?.ITMDES1_0;\r\n                items.push({\r\n                    tolerancia: v.tolerancia_BC, arranque: v.arranque_BC, vglobal: v.global,\r\n                    densidade: v.densidade_BC, /* mangueira: v.mangueira_BC, */ extrusora: 'BC', matprima_cod: v.matprima_cod_BC,\r\n                    matprima_des\r\n                });\r\n            }\r\n            const { cliente_cod: { value: cliente_cod, label: cliente_nome } = {} } = values;\r\n            const response = await fetchPost({ url: `${API_URL}/newformulacao/`, parameters: { ...values, items, produto_id: ctx.produto_id, cliente_cod, cliente_nome } });\r\n            if (response.data.status !== \"error\") {\r\n                parentReload({formulacao_id: record.formulacao_id}, \"init\");\r\n            }\r\n            setResultMessage(response.data);\r\n        }\r\n        setFormStatus(status);\r\n    }\r\n\r\n    const onSuccessOK = () => {\r\n        if (operation.key === \"insert\") {\r\n            form.resetFields();\r\n            init();\r\n            setResultMessage({ status: \"none\" });\r\n        }\r\n        setSubmitting(false);\r\n    }\r\n\r\n    const onErrorOK = () => {\r\n        setSubmitting(false);\r\n        setResultMessage({ status: \"none\" });\r\n    }\r\n\r\n    const onClose = (reload = false) => {\r\n        closeParent();\r\n    }\r\n\r\n    const onSubmit = useCallback(() => {\r\n        setSubmitting(true);\r\n        onFinish(form.getFieldsValue(true));\r\n    },[]);\r\n\r\n    return (\r\n        <>\r\n            <ResultMessage\r\n                result={resultMessage}\r\n                successButtonOK={operation.key === \"insert\" && <Button type=\"primary\" key=\"goto-of\" onClick={onSuccessOK}>Criar Nova Formulação</Button>}\r\n                successButtonClose={<Button key=\"goto-close\" onClick={() => onClose(true)}>Fechar</Button>}\r\n                errorButtonOK={<Button type=\"primary\" key=\"goto-ok\" onClick={onErrorOK}>OK</Button>}\r\n                errorButtonClose={<Button key=\"goto-close\" onClick={onClose}>Fechar</Button>}\r\n            >\r\n                <AlertsContainer id=\"el-external\" />\r\n                <AlertMessages formStatus={formStatus} />\r\n                <Form form={form} name={`fps`} onFinish={onFinish} onValuesChange={onValuesChange} component={wrapForm}>\r\n                    <FormLayout\r\n                        id=\"LAY-FORMULACAO-UPSERT\"\r\n                        guides={guides}\r\n                        layout=\"vertical\"\r\n                        style={{ width: \"100%\", padding: \"0px\"/* , minWidth: \"700px\" */ }}\r\n                        schema={schema}\r\n                        field={{\r\n                            forInput,\r\n                            wide: [16],\r\n                            margin: \"2px\", overflow: false, guides: guides,\r\n                            label: { enabled: true, pos: \"top\", align: \"start\", vAlign: \"center\", /* width: \"80px\", */ wrap: false, overflow: false, colon: true, ellipsis: true },\r\n                            alert: { pos: \"right\", tooltip: true, container: false /* container: \"el-external\" */ },\r\n                            layout: { top: \"\", right: \"\", center: \"\", bottom: \"\", left: \"\" },\r\n                            required: true,\r\n                            style: { alignSelf: \"top\" }\r\n                        }}\r\n                        fieldSet={{\r\n                            guides: guides,\r\n                            wide: 16, margin: \"2px\", layout: \"horizontal\", overflow: false\r\n                        }}\r\n                    >\r\n                        {/* {forInput && <>\r\n                            <FieldSet margin={false} field={{ wide: [6, 4] }}>\r\n                                <Field name=\"designacao\" label={{ enabled: false }}><Input placeholder=\"Designação\" size=\"small\" /></Field>\r\n                            </FieldSet>\r\n                            <HorizontalRule margin=\"24px\" />\r\n                        </>\r\n                        } */}\r\n\r\n                        {forInput && <>\r\n                            <FieldSet margin={false} field={{ wide: [6, 8] }}>\r\n                                <Field name=\"designacao\" label={{ enabled: false }}><Input placeholder=\"Designação\" size=\"small\" /></Field>\r\n                                <Field name=\"cliente_cod\" required={false} layout={{ center: \"align-self:center;\", right: \"align-self:center;\" }} label={{ enabled: false, text: \"Cliente\", pos: \"left\" }}>\r\n                                    <SelectDebounceField\r\n                                        placeholder=\"Cliente\"\r\n                                        size=\"small\"\r\n                                        keyField=\"BPCNUM_0\"\r\n                                        textField=\"BPCNAM_0\"\r\n                                        showSearch\r\n                                        showArrow\r\n                                        allowClear\r\n                                        fetchOptions={loadCustomersLookup}\r\n                                    />\r\n                                </Field>\r\n                            </FieldSet>\r\n                            <VerticalSpace height=\"24px\" />\r\n                        </>\r\n                        }\r\n                        {!forInput && <>\r\n                            <FieldSet margin={false} field={{ wide: [9, 7] }}>\r\n                                <Field name=\"cliente_cod\" required={false} layout={{ center: \"align-self:center;\", right: \"align-self:center;\" }} label={{ enabled: false, text: \"Cliente\", pos: \"left\" }}>\r\n                                    <SelectDebounceField\r\n                                        placeholder=\"Cliente\"\r\n                                        size=\"small\"\r\n                                        keyField=\"BPCNUM_0\"\r\n                                        textField=\"BPCNAM_0\"\r\n                                        showSearch\r\n                                        showArrow\r\n                                        allowClear\r\n                                        fetchOptions={loadCustomersLookup}\r\n                                    />\r\n                                </Field>\r\n                            </FieldSet>\r\n                            <VerticalSpace height=\"24px\" />\r\n                        </>\r\n                        }\r\n\r\n                        <FieldSet wide={16} margin={false}>\r\n                            <FieldSet wide={3} />\r\n                            <FieldSet wide={10} margin={false} layout=\"vertical\" field={{ split: 5, wide: undefined }}>\r\n                                <FieldSet margin={false}>\r\n                                    <Field name=\"extr0\" label={{ enabled: false }}><Input disabled={true} size=\"small\" /></Field>\r\n                                    <Field name=\"extr1\" label={{ enabled: false }}><Input disabled={true} size=\"small\" /></Field>\r\n                                    <Field name=\"extr2\" label={{ enabled: false }}><Input disabled={true} size=\"small\" /></Field>\r\n                                    <Field name=\"extr3\" label={{ enabled: false }}><Input disabled={true} size=\"small\" /></Field>\r\n                                    <Field name=\"extr4\" label={{ enabled: false }}><Input disabled={true} size=\"small\" /></Field>\r\n                                </FieldSet>\r\n                                <FieldSet margin={false}>\r\n                                    <Field name=\"extr0_val\" label={{ enabled: false }}><InputNumber disabled={true} size=\"small\" addonAfter={<b>%</b>} maxLength={4} /></Field>\r\n                                    <Field name=\"extr1_val\" label={{ enabled: false }}><InputNumber disabled={true} size=\"small\" addonAfter={<b>%</b>} maxLength={4} /></Field>\r\n                                    <Field name=\"extr2_val\" label={{ enabled: false }}><InputNumber disabled={true} size=\"small\" addonAfter={<b>%</b>} maxLength={4} /></Field>\r\n                                    <Field name=\"extr3_val\" label={{ enabled: false }}><InputNumber disabled={true} size=\"small\" addonAfter={<b>%</b>} maxLength={4} /></Field>\r\n                                    <Field name=\"extr4_val\" label={{ enabled: false }}><InputNumber disabled={true} size=\"small\" addonAfter={<b>%</b>} maxLength={4} /></Field>\r\n                                </FieldSet>\r\n                            </FieldSet>\r\n                            <FieldSet wide={3} />\r\n                        </FieldSet>\r\n\r\n                        <VerticalSpace height=\"12px\" />\r\n\r\n                        <HeaderA />\r\n                        <SubFormMateriasPrimas form={form} name=\"formu_materiasprimas_A\" forInput={forInput} matPrimasLookup={matPrimasLookup} id=\"A\" />\r\n                        <HeaderBC />\r\n                        <SubFormMateriasPrimas form={form} name=\"formu_materiasprimas_BC\" forInput={forInput} matPrimasLookup={matPrimasLookup} sum={true} id=\"BC\" />\r\n\r\n                    </FormLayout>\r\n                </Form>\r\n                {parentRef && <Portal elId={parentRef.current}>\r\n                    <Space>\r\n                        <Button disabled={submitting} onClick={onSubmit} type=\"primary\">Guardar</Button>\r\n                        {/* <Button type=\"primary\" onClick={() => onFinish(form.getFieldsValue(true))}>Guardar</Button> */}\r\n                        {/* <Button onClick={() => setGuides(!guides)}>{guides ? \"No Guides\" : \"Guides\"}</Button> */}\r\n                    </Space>\r\n                </Portal>\r\n                }\r\n            </ResultMessage>\r\n        </>\r\n    );\r\n}","import React, { useEffect, useState, useCallback, useRef, useContext } from 'react';\r\nimport { createUseStyles } from 'react-jss';\r\nimport styled from 'styled-components';\r\nimport dayjs from 'dayjs';\r\nimport Joi from 'joi';\r\nimport { fetch, fetchPost, cancelToken } from \"utils/fetch\";\r\nimport { API_URL } from \"config\";\r\nimport { WrapperForm, TitleForm, FormLayout, Field, FieldSet, Label, LabelField, FieldItem, AlertsContainer, Item, SelectField, InputAddon } from \"components/formLayout\";\r\nimport Toolbar from \"components/toolbar\";\r\nimport { Button, Spin } from \"antd\";\r\nimport { LoadingOutlined, EditOutlined } from '@ant-design/icons';\r\nimport { DATE_FORMAT, DATETIME_FORMAT } from 'config';\r\nimport FormFormulacaoUpsert from '../formulacao/FormFormulacaoUpsert';\r\nimport { OFabricoContext } from './FormOFabricoValidar';\r\n\r\nconst DrawerFormulacao = ({ showWrapper, setShowWrapper, parentReload }) => {\r\n    const [formTitle, setFormTitle] = useState({});\r\n    const iref = useRef();\r\n    const { record = {} } = showWrapper;\r\n    const onVisible = () => {\r\n        setShowWrapper(prev => ({ ...prev, show: !prev.show }));\r\n    }\r\n    return (\r\n        <WrapperForm\r\n            title={<TitleForm title={formTitle.title} subTitle={formTitle.subTitle} />}\r\n            type=\"drawer\"\r\n            destroyOnClose={true}\r\n            //width={width}\r\n            mask={true}\r\n            /* style={{ maginTop: \"48px\" }} */\r\n            setVisible={onVisible}\r\n            visible={showWrapper.show}\r\n            width={800}\r\n            bodyStyle={{ height: \"450px\" /*  paddingBottom: 80 *//* , overflowY: \"auto\", minHeight: \"350px\", maxHeight: \"calc(100vh - 50px)\" */ }}\r\n            footer={<div ref={iref} id=\"form-wrapper\" style={{ textAlign: 'right' }}></div>}\r\n        >\r\n            <FormFormulacaoUpsert setFormTitle={setFormTitle} record={record} parentRef={iref} closeParent={onVisible} parentReload={parentReload} />\r\n        </WrapperForm>\r\n    );\r\n}\r\n\r\nconst loadFormulacaoesLookup = async ({ produto_id, token }) => {\r\n    const { data: { rows } } = await fetchPost({ url: `${API_URL}/formulacoeslookup/`, filter: { produto_id }, sort: [], cancelToken: token });\r\n    return rows;\r\n}\r\nconst getFormulacaoMateriasPrimas = async ({ formulacao_id, token }) => {\r\n    if (!formulacao_id) {\r\n        return [];\r\n    }\r\n    const { data: { rows } } = await fetchPost({ url: `${API_URL}/formulacaomateriasprimasget/`, filter: { formulacao_id }, sort: [], cancelToken: token });\r\n    return rows;\r\n}\r\n\r\nexport default ({ changedValues }) => {\r\n    const { form, guides, schema, fieldStatus, ...ctx } = useContext(OFabricoContext);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState({ show: false });\r\n    const [formulacoes, setFormulacoes] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const cancelFetch = cancelToken();\r\n        loadData({ formulacao_id: form.getFieldValue(\"formulacao_id\"), token: cancelFetch });\r\n        return (() => cancelFetch.cancel(\"Form Formulação Cancelled\"));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const cancelFetch = cancelToken();\r\n        if (changedValues) {\r\n            if (\"formulacao_id\" in changedValues) {\r\n                setLoading(true);\r\n                loadData({ formulacao_id: changedValues.formulacao_id, token: cancelFetch });\r\n            }\r\n        }\r\n        return (() => cancelFetch.cancel(\"Form Formulação Cancelled\"));\r\n    }, [changedValues]);\r\n\r\n    const loadData = (data = {}, type = \"init\") => {\r\n        const { formulacao_id, token } = data;\r\n        switch (type) {\r\n            case \"lookup\":\r\n                setLoading(true);\r\n                (async () => {\r\n                    setFormulacoes(await loadFormulacaoesLookup({ produto_id: ctx.produto_id, token }));\r\n                    setLoading(false);\r\n                })();\r\n                break;\r\n            default:\r\n                if (!loading) {\r\n                    setLoading(true);\r\n                }\r\n                (async () => {\r\n                    let _formulacoes = formulacoes;\r\n                    if (ctx.produto_id) {\r\n                        _formulacoes = await loadFormulacaoesLookup({ produto_id: ctx.produto_id, token });\r\n                        setFormulacoes(_formulacoes);\r\n                    }\r\n                    if (formulacao_id) {\r\n                        let [formulacao] = _formulacoes.filter(v => v.id === formulacao_id);\r\n                        const formulacaoMateriasPrimas = await getFormulacaoMateriasPrimas({ formulacao_id, token });\r\n                        formulacao = { ...formulacao, cliente_cod: { key: formulacao.cliente_cod, value: formulacao.cliente_cod, label: formulacao.cliente_nome } };\r\n                        form.setFieldsValue({ formulacao, formulacaoMatPrimas: [...formulacaoMateriasPrimas] });\r\n                    }\r\n                    setLoading(false);\r\n                })();\r\n        }\r\n    }\r\n\r\n    const onShowForm = (newForm = false, forInput = false) => {\r\n        if (newForm) {\r\n            setShowForm(prev => ({ ...prev, show: !prev.show, record: {}, forInput }));\r\n        } else {\r\n            setShowForm(prev => ({ ...prev, show: !prev.show, record: { ...form.getFieldsValue([\"formulacao_id\",\"formulacao\", \"formulacaoMatPrimas\"]) }, forInput }));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Spin spinning={loading} indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} tip=\"A carregar...\">\r\n                <DrawerFormulacao showWrapper={showForm} setShowWrapper={setShowForm} parentReload={loadData} />\r\n                <FormLayout\r\n                    id=\"LAY-FORMULACAO\"\r\n                    guides={guides}\r\n                    layout=\"vertical\"\r\n                    style={{ width: \"100%\", padding: \"0px\"/* , minWidth: \"700px\" */ }}\r\n                    schema={schema}\r\n                    field={{\r\n                        //wide: [3, 2, 1, '*'],\r\n                        margin: \"2px\", overflow: false, guides: guides,\r\n                        label: { enabled: true, pos: \"top\", align: \"start\", vAlign: \"center\", /* width: \"80px\", */ wrap: false, overflow: false, colon: true, ellipsis: true },\r\n                        alert: { pos: \"right\", tooltip: true, container: true /* container: \"el-external\" */ },\r\n                        layout: { top: \"\", right: \"\", center: \"\", bottom: \"\", left: \"\" },\r\n                        addons: {}, //top|right|center|bottom|left\r\n                        required: true,\r\n                        style: { alignSelf: \"top\" }\r\n                    }}\r\n                    fieldSet={{\r\n                        guides: guides,\r\n                        wide: 16, margin: \"2px\", layout: \"horizontal\", overflow: false\r\n                    }}\r\n                >\r\n                    <FieldSet>\r\n                        <Toolbar\r\n                            style={{ width: \"100%\" }}\r\n                            left={\r\n                                <FieldSet>\r\n                                    <Field name=\"formulacao_id\" layout={{ center: \"align-self:center;\", right: \"align-self:center;\" }} label={{ enabled: true, text: \"Formulacao\", pos: \"left\" }} addons={{\r\n                                        ...(form.getFieldValue(\"formulacao_id\") && { right: <Button onClick={() => onShowForm(false, true)} style={{ marginLeft: \"3px\" }} size=\"small\"><EditOutlined style={{ fontSize: \"16px\" }} /></Button> })\r\n                                    }}>\r\n                                        <SelectField allowClear size=\"small\" data={formulacoes} keyField=\"id\" textField=\"designacao\"\r\n                                            optionsRender={(d, keyField, textField) => ({ label: <div style={{ display: \"flex\" }}><div style={{ minWidth: \"150px\" }}><b>{d[textField]}</b></div><div>v.{d[\"versao\"]}</div></div>, value: d[keyField] })}\r\n                                        />\r\n                                    </Field>\r\n                                </FieldSet>\r\n                            }\r\n                            right={<Button onClick={() => onShowForm(true, true)}>Nova Formulação</Button>}\r\n                        />\r\n                    </FieldSet>\r\n                    <FieldSet>\r\n                        {(!loading && form.getFieldValue(\"formulacao_id\")) && <FormFormulacaoUpsert record={form.getFieldsValue(true)} wrapForm={false} forInput={false} parentReload={loadData} />}\r\n                    </FieldSet>\r\n                </FormLayout>\r\n            </Spin>\r\n        </>\r\n    );\r\n}"],"names":["React","useEffect","useState","useCallback","useRef","useContext","createUseStyles","styled","dayjs","Joi","fetch","fetchPost","API_URL","getSchema","FormLayout","Field","FieldSet","FieldItem","AlertsContainer","Item","SelectField","CheckboxField","HorizontalRule","VerticalSpace","InputAddon","SelectDebounceField","AlertMessages","IconButton","ResultMessage","Portal","Input","Space","Form","Button","InputNumber","DatePicker","PlusOutlined","MdAdjust","MdAssignmentReturned","CgCloseO","DATE_FORMAT","DATETIME_FORMAT","FORMULACAO_EXTRUSORAS_COD","FORMULACAO_EXTRUSORAS_VAL","FORMULACAO_TOLERANCIA","FORMULACAO_PONDERACAO_EXTR","FORMULACAO_MANGUEIRAS","OFabricoContext","schema","keys","excludeKeys","formu_materiasprimas_A","array","label","min","required","formu_materiasprimas_BC","matprima_cod_A","string","densidade_A","number","arranque_A","matprima_cod_BC","densidade_BC","arranque_BC","unknown","setId","id","key","values","append","value","suffix","prefix","onUndefined","HeaderA","backgroundColor","color","border","fontWeight","textAlign","noItemWrap","enabled","wide","style","borderLeft","alignSelf","display","flexDirection","justifyContent","fontSize","borderTop","HeaderBC","updateGlobals","adjust","extrusora","index","action","listA","listBC","rest","ponderacaoA","ponderacaoBC","globalA","globalBC","sumArranqueA","sumArranqueBC","entries","i","v","arranque","global","totalGlobal","SubFormMateriasPrimas","form","forInput","name","matPrimasLookup","sum","idx","fieldValues","getFieldsValue","setFieldsValue","fields","add","remove","move","addRow","removeRow","fieldName","field","moveRow","from","to","map","d","keyField","textField","input","option","toLowerCase","indexOf","addonBefore","getFieldValue","toFixed","marginTop","width","LoadMateriasPrimasLookup","record","url","filter","rows","data","loadCustomersLookup","pagination","limit","replaceAll","setFormTitle","parentRef","closeParent","parentReload","wrapForm","ctx","useForm","loading","setLoading","submitting","setSubmitting","changedValues","setChangedValues","error","warning","info","success","formStatus","setFormStatus","guides","setGuides","formulacao_id","operation","setOperation","status","resultMessage","setResultMessage","setMatPrimasLookup","init","lookup","title","formulacaoMatPrimas","vglobal","matprima_cod","densidade","tolerancia_A","tolerancia","removeCtrl","tolerancia_BC","formulacao","item_cod","subTitle","item_nome","extr0","extr1","extr2","extr3","extr4","extr0_val","extr1_val","extr2_val","extr3_val","extr4_val","onValuesChange","allA","allBC","allValues","onFinish","items","msgKeys","validate","abortEarly","console","log","details","includes","context","sumA","reduce","a","b","sumBC","Math","round","push","message","length","matprima_des","find","val","ITMREF_0","ITMDES1_0","cliente_cod","cliente_nome","parameters","produto_id","response","onSuccessOK","resetFields","onErrorOK","onClose","reload","onSubmit","padding","margin","overflow","pos","align","vAlign","wrap","colon","ellipsis","alert","tooltip","container","layout","top","right","center","bottom","left","text","split","undefined","current","cancelToken","WrapperForm","TitleForm","Label","LabelField","Toolbar","Spin","LoadingOutlined","EditOutlined","FormFormulacaoUpsert","DrawerFormulacao","showWrapper","setShowWrapper","formTitle","iref","onVisible","prev","show","height","loadFormulacaoesLookup","token","sort","getFormulacaoMateriasPrimas","fieldStatus","showForm","setShowForm","formulacoes","setFormulacoes","cancelFetch","loadData","cancel","type","_formulacoes","formulacaoMateriasPrimas","onShowForm","newForm","addons","marginLeft","minWidth"],"sourceRoot":""}