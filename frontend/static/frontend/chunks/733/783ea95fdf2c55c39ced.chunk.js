"use strict";(self.webpackChunksgp=self.webpackChunksgp||[]).push([[733],{51733:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});n(57327),n(41539),n(79753),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(47042),n(68309),n(91038),n(74916),n(69070),n(47941),n(38880),n(89554),n(54747),n(49337),n(33321),n(88674),n(35666);var r=n(67294),a=(n(27484),n(42705)),i=n.n(a),l=n(42919),o=n(63386),c=n(23455),u=n(28479),s=n(96579),m=n(5368),d=n(92080),f=n(11382),p=n(71577),g=n(19650),b=n(7085),y=n(8212),v=(n(92222),n(26699),n(32023),n(21249),n(54397)),E=n(96641),h=n(26402),w=n(70507),_=n(32787),x=n(49101),k=n(80471),z=n(36904),S=n(85227);function C(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t,n,r,a,i,l){try{var o=e[i](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){Z(i,r,a,l,o,"next",e)}function o(e){Z(i,r,a,l,o,"throw",e)}l(void 0)}))}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=function(e,t){return(0,o.J1)({npaletes:i().number().positive().label("Paletes/Contentor").required(),palete_maxaltura:i().number().positive().precision(2).label("Altura Máx. Palete (metros)").required(),netiquetas_bobine:i().number().positive().precision(2).label("Etiqueta/Bobine").required(),netiquetas_lote:i().number().positive().precision(2).label("Etiqueta do Lote da Palete").required(),netiquetas_final:i().number().positive().precision(2).label("Etiqueta Final da Palete").required(),folha_identificativa:i().number().min(0).precision(2).label("Folha Identificativa Palete").required(),cintas:i().number().valid(0,1),ncintas:i().when("cintas",{is:1,then:i().number().positive().required()}),paletizacao:i().array().min(1).label("Items da Paletização").required()},e,t).unknown(!0)},N=function(e){var t=e.form,n=e.field,a=e.remove,i=e.move,l=e.index,o=e.length,s=e.operation,m=e.forInput,d=q((0,r.useState)(1),2),f=d[0],p=d[1];(0,r.useEffect)((function(){"update"===s.key&&p(t.getFieldValue(["paletizacao",n.name,"item_id"]))}),[]);return r.createElement(u.C3,{layout:"horizontal",field:{wide:[1,1,8,5,1]}},r.createElement(u.mZ,{label:{enabled:!1}},m&&l>0&&r.createElement(E.Z,{onClick:function(){return i(l,l-1)},style:{alignSelf:"center"}},r.createElement(k.Hvn,null))),r.createElement(u.mZ,{label:{enabled:!1}},m&&l<o-1&&r.createElement(E.Z,{onClick:function(){return i(l,l+1)},style:{alignSelf:"center"}},r.createElement(k.bcS,null))),r.createElement(u.gN,{label:{enabled:!1},name:[n.name,"item_id"]},r.createElement(u.mg,{onChange:function(){return e=n.name,void p(t.getFieldValue(["paletizacao",e,"item_id"]));var e},size:"small",data:c.PN,keyField:"key",textField:"value"})),1===f&&r.createElement(u.gN,{label:{enabled:!1},name:[n.name,"item_paletesize"]},r.createElement(u.mg,{size:"small",data:c.T$,keyField:"key",textField:"value"})),2===f&&r.createElement(u.gN,{label:{enabled:!1},name:[n.name,"item_numbobines"]},r.createElement(w.Z,{size:"small",min:1,max:80})),(f>2||void 0===f)&&r.createElement(u.mZ,{label:{enabled:!1}}),r.createElement(u.mZ,{label:{enabled:!1}},m&&r.createElement(E.Z,{onClick:function(){return a(n.name)},style:{alignSelf:"center"}},r.createElement(k.dc5,null))))};const T=function(e){var t,n=e.record,a=e.setFormTitle,i=e.parentRef,o=e.closeParent,s=e.parentReload,f=e.wrapForm,b=void 0===f?"form":f,y=e.forInput,E=void 0===y||y,k=((0,r.useContext)(z.OFabricoContext),q(d.Z.useForm(),1)[0]),F=q((0,r.useState)(!0),2),P=F[0],Z=F[1],j=q((0,r.useState)(!1),2),A=j[0],T=j[1],V=q((0,r.useState)({}),2),D=V[0],L=V[1],B=q((0,r.useState)({error:[],warning:[],info:[],success:[]}),2),M=B[0],W=B[1],U=q((0,r.useState)(!1),2),H=U[0],J=(U[1],q((0,r.useState)((t=n.paletizacao_id)?{key:"update",values:{id:t}}:{key:"insert",values:{}}),2)),K=J[0],$=(J[1],q((0,r.useState)({status:"none"}),2)),G=$[0],Y=$[1],Q=function(){I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"update"===K.key?(a&&a({title:"Editar Esquema de Paletização ".concat(n.cliente_nome),subTitle:"".concat(n.artigo_cod)}),k.setFieldsValue(O({},n))):(a&&a({title:"Novo Esquema de Paletização ".concat(n.cliente_nome),subTitle:"".concat(n.artigo_cod)}),k.setFieldsValue({contentor_id:"Camião",cintas_palete:1,ncintas:2,netiquetas_bobine:2,netiquetas_lote:4,netiquetas_final:1,npaletes:24,palete_maxaltura:2.55,folha_identificativa:1})),Z(!1);case 2:case"end":return e.stop()}}),e)})))()};(0,r.useEffect)((function(){Q()}),[]);var X=function(){var e=I(regeneratorRuntime.mark((function e(t){var r,a,i,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={error:[],warning:[],info:[],success:[]},i=["paletizacao"],o=R().validate(t,{abortEarly:!1}),a.error=[].concat(C(a.error),C(o.error?null===(r=o.error)||void 0===r?void 0:r.details.filter((function(e){return i.includes(e.context.key)})):[])),o.error||0!==a.error.length){e.next=10;break}return e.next=7,(0,l.SD)({url:"".concat(c.T5,"/newpaletizacaoschema/"),parameters:O(O({},t),{},{id:null==n?void 0:n.paletizacao_id,cliente_cod:n.cliente_cod,cliente_nome:n.cliente_nome,artigo_cod:n.artigo_cod})});case 7:"error"!==(u=e.sent).data.status&&("update"===K.key?s({paletizacao_id:K.values.id}):s({},"lookup")),Y(u.data);case 10:T(!1),W(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){o()},te=(0,r.useCallback)(I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!0),k.submit();case 2:case"end":return e.stop()}}),e)}))),[]);return r.createElement(r.Fragment,null,r.createElement(h.Z,{result:G,successButtonOK:"insert"===K.key&&r.createElement(p.Z,{type:"primary",key:"goto-of",onClick:function(){"insert"===K.key&&(k.resetFields(),Q(),Y({status:"none"})),T(!1)}},"Criar Novo Esquema"),successButtonClose:r.createElement(p.Z,{key:"goto-close",onClick:function(){return ee(!0)}},"Fechar"),errorButtonOK:r.createElement(p.Z,{type:"primary",key:"goto-ok",onClick:function(){T(!1),Y({status:"none"})}},"OK"),errorButtonClose:r.createElement(p.Z,{key:"goto-close",onClick:ee},"Fechar")},r.createElement(u.NH,{id:"el-external"}),r.createElement(v.Z,{formStatus:M}),r.createElement(d.Z,{form:k,name:"fps",onFinish:X,onValuesChange:function(e,t){L(e)},component:b},r.createElement(u.lt,{id:"LAY-PALETIZACAO_SCHEMA",guides:H,layout:"vertical",style:{width:"100%",padding:"0px"},schema:R,field:{forInput:E,wide:[16],margin:"2px",overflow:!1,guides:H,label:{enabled:!0,pos:"top",align:"start",vAlign:"center",wrap:!1,overflow:!1,colon:!0,ellipsis:!0},alert:{pos:"right",tooltip:!0,container:!1},layout:{top:"",right:"",center:"",bottom:"",left:""},required:!0,style:{alignSelf:"top"}},fieldSet:{guides:H,wide:16,margin:"2px",layout:"horizontal",overflow:!1}},E&&r.createElement(r.Fragment,null,r.createElement(u.C3,{margin:!1,field:{wide:[4,4]}},r.createElement(u.gN,{name:"contentor_id",label:{enabled:!0,text:"Contentor"}},r.createElement(u.mg,{size:"small",data:c.yS,keyField:"value",textField:"label",optionsRender:function(e,t,n){return{label:e[t],value:e[t]}}})),r.createElement(u.gN,{name:"designacao",label:{enabled:!0,text:"Designação"}},r.createElement(_.Z,{size:"small"}))),r.createElement(u.bo,{margin:"12px"})),r.createElement(u.C3,{margin:!1,field:{wide:16}},r.createElement(u.C3,{margin:!1,split:3,field:{alert:{tooltip:!0},layout:{center:"min-width: 70px; max-width: 70px; align-self:center;"},label:{pos:"right",width:"100%"}},layout:"vertical"},r.createElement(u.gN,{label:{text:"Paletes/Contentor"},name:"npaletes"},r.createElement(w.Z,{size:"small",min:1,max:150})),r.createElement(u.gN,{label:{text:"Altura Máx. Palete (metros)"},name:"palete_maxaltura"},r.createElement(w.Z,{size:"small",min:1,max:150})),r.createElement(u.gN,{required:!1,name:"paletes_sobrepostas",label:{enabled:!0,text:"Paletes Sobrepostas"}},r.createElement(u.ji,{disabled:!0}))),r.createElement(u.C3,{margin:!1,split:3,field:{layout:{center:"min-width: 70px;max-width: 70px; align-self:center;"},label:{pos:"right",width:"100%"}},layout:"vertical"},r.createElement(u.gN,{name:"netiquetas_bobine",label:{enabled:!0,text:"Etiqueta/Bobine"}},r.createElement(w.Z,{size:"small",min:1,max:10})),r.createElement(u.gN,{name:"netiquetas_lote",label:{enabled:!0,text:"Etiqueta do Lote da Palete"}},r.createElement(w.Z,{size:"small",min:1,max:10})),r.createElement(u.gN,{name:"netiquetas_final",label:{enabled:!0,text:"Etiqueta Final da Palete"}},r.createElement(w.Z,{size:"small",min:1,max:10}))),r.createElement(u.C3,{margin:!1,split:3,field:{layout:{center:"min-width: 20px;max-width: 20px; align-self:center;"},label:{pos:"right",width:"100%"}},layout:"vertical"},r.createElement(u.gN,{required:!1,name:"filmeestiravel_bobines",label:{enabled:!0,text:"Filme Estirável/Palete"}},r.createElement(u.ji,null)),r.createElement(u.gN,{required:!1,name:"filmeestiravel_exterior",label:{enabled:!0,text:"Filme Estirável Exterior"}},r.createElement(u.ji,null)))),r.createElement(u.C3,{wide:16,margin:!1,field:{wide:[2,2,3,5,"*"],style:{alignSelf:"center"}}},r.createElement(u.gN,{name:"cintas",style:{minWidth:"20px",alignSelf:"center"},label:{enabled:!1}},r.createElement(u.ji,null)),r.createElement(u.mZ,{label:{enabled:!1}},r.createElement(u.ck,{shouldUpdate:function(e,t){return(null==e?void 0:e.cintas)!==(null==t?void 0:t.cintas)}},(function(){return r.createElement(u.gN,{rule:R(["cintas","ncintas"]),allValues:k.getFieldsValue(!0),layout:{center:"min-width: 50px;max-width: 50px; align-self:center;"},name:"ncintas",label:{enabled:!0,text:"Cintas",pos:"right",colon:!1}},r.createElement(w.Z,{disabled:1!==k.getFieldValue(["cintas"]),size:"small",min:1,max:10}))}))),r.createElement(u.mZ,{label:{enabled:!1}},r.createElement(u.ck,{shouldUpdate:function(e,t){return(null==e?void 0:e.cintas)!==(null==t?void 0:t.cintas)}},(function(){return r.createElement(u.gN,{name:"cintas_palete",layout:{center:"align-self:center;"},label:{enabled:!1}},r.createElement(u.mg,{size:"small",data:c.TM,keyField:"value",textField:"label",disabled:1!==k.getFieldValue(["cintas"]),optionsRender:function(e,t,n){return{label:e[n],value:e[t]}}}))}))),r.createElement(u.gN,{name:"folha_identificativa",required:!1,layout:{center:"align-self:center;"},label:{enabled:!0,text:"Folha Identificativa da Palete",pos:"left",width:"100%"}},r.createElement(w.Z,{size:"small",min:0,max:10}))),r.createElement(u.bo,{margin:"12px"}),r.createElement(u.C3,{field:{wide:16},layout:"horizontal"},r.createElement(u.C3,{layout:"vertical",wide:7},r.createElement(d.Z.List,{name:"paletizacao"},(function(e,t){var n=t.add,a=t.remove,i=t.move,l=function(e){a(e)},o=function(e,t){i(e,t)};return r.createElement(r.Fragment,null,r.createElement(u.C3,null,E&&r.createElement(p.Z,{type:"dashed",onClick:function(){n({item_id:1,item_paletesize:"970x970",item_numbobines:10},0)},style:{width:"100%"}},r.createElement(x.Z,null),"Adicionar")),e.map((function(t,n){return r.createElement(N,{key:t.key,form:k,remove:l,move:o,field:t,index:n,length:e.length,operation:K,forInput:E})})))}))),r.createElement(u.C3,{wide:9},!P&&r.createElement(S.ZP,{form:k,changedValues:D}))))),i&&r.createElement(m.Z,{elId:i.current},r.createElement(g.Z,null,r.createElement(p.Z,{disabled:A,onClick:te,type:"primary"},"Guardar")))))};function V(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t,n,r,a,i,l){try{var o=e[i](l),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,a)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){D(i,r,a,l,o,"next",e)}function o(e){D(i,r,a,l,o,"throw",e)}l(void 0)}))}}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e,t){return(0,o.J1)({},e,t).unknown(!0)},$=function(e){var t=e.showWrapper,n=e.setShowWrapper,a=e.parentReload,i=U((0,r.useState)({}),2),l=i[0],o=i[1],c=(0,r.useRef)(),s=t.record,m=void 0===s?{}:s,d=function(){n((function(e){return M(M({},e),{},{show:!e.show})}))};return r.createElement(u.JE,{title:r.createElement(u.QF,{title:l.title,subTitle:l.subTitle}),type:"drawer",destroyOnClose:!0,mask:!0,setVisible:d,visible:t.show,width:800,bodyStyle:{height:"450px"},footer:r.createElement("div",{ref:c,id:"form-wrapper",style:{textAlign:"right"}})},r.createElement(T,{setFormTitle:o,record:m,parentRef:c,closeParent:d,parentReload:a}))},G=function(){var e=L(regeneratorRuntime.mark((function e(t){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.artigo_cod,r=t.cliente_cod,a=t.token,e.next=3,(0,l.SD)({url:"".concat(c.T5,"/paletizacoeslookup/"),filter:{artigo_cod:n,cliente_cod:r},sort:[{column:"contentor_id"},{column:"designacao"}],cancelToken:a});case 3:return i=e.sent,o=i.data.rows,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=L(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.paletizacao_id,r=t.token,n){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,(0,l.SD)({url:"".concat(c.T5,"/paletizacaodetailsget/"),filter:{paletizacao_id:n},sort:[{column:"item_order",direction:"DESC"}],cancelToken:r});case 5:return a=e.sent,i=a.data.rows,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const Q=function(e){var t,n=e.record,a=e.setFormTitle,i=e.parentRef,o=e.closeParent,v=e.parentReload,E=U(d.Z.useForm(),1)[0],h=U((0,r.useState)(!1),2),w=h[0],_=(h[1],U((0,r.useState)(!0),2)),x=_[0],k=_[1],z=U((0,r.useState)(!1),2),S=z[0],C=z[1],F=U((0,r.useState)((t=n.aggItem.paletizacao_id)?{key:"update",values:{id:t}}:{key:"insert",values:{}}),2),O=(F[0],F[1],U((0,r.useState)({show:!1}),2)),P=O[0],Z=O[1],I=U((0,r.useState)([]),2),q=I[0],j=I[1],A=U((0,r.useState)({}),2),R=A[0],N=A[1],D=U((0,r.useState)({status:"none"}),2);D[0],D[1];(0,r.useEffect)((function(){a&&a({title:"Esquema de Paletização ".concat(n.aggItem.cliente_nome),subTitle:"".concat(n.aggItem.item_cod)})}),[]),(0,r.useEffect)((function(){var e=(0,l.BO)();return W({paletizacao_id:"paletizacao_id"in R?R.paletizacao_id:n.aggItem.paletizacao_id,token:e}),function(){return e.cancel("Form Paletização Cancelled")}}),[R]);var B=function(){var e=L(regeneratorRuntime.mark((function e(t){var r,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=E.getFieldValue("paletizacao_id"),a=n.aggItem,i=a.tempof_id,u=a.of_id,a.qty_encomenda,s={artigo_thickness:n.aggItem.artigo.thickness,artigo_diam:n.aggItem.artigo.diam_ref,artigo_core:n.aggItem.artigo.core,artigo_width:n.aggItem.artigo.lar,qty_item:n.aggItem.qty_encomenda},e.next=5,(0,l.SD)({url:"".concat(c.T5,"/savetempordemfabrico/"),parameters:{type:"paletizacao",paletizacao_id:r,ofabrico_id:i,ofabrico_cod:u,artigo:s}});case 5:"error"!==e.sent.data.status&&(v({agg_id:n.aggItem.id}),o()),C(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init",r=e.paletizacao_id,a=e.token;if("lookup"===t)k(!0),L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,G({artigo_cod:n.aggItem.item_cod,cliente_cod:n.aggItem.cliente_cod,token:a});case 3:e.t1=e.sent,(0,e.t0)(e.t1),k(!1);case 6:case"end":return e.stop()}}),e)})))();else x||k(!0),L(regeneratorRuntime.mark((function e(){var t,i,l,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=q,!n.aggItem.item_cod){e.next=6;break}return e.next=4,G({artigo_cod:n.aggItem.item_cod,cliente_cod:n.aggItem.cliente_cod,token:a});case 4:t=e.sent,j(t);case 6:if(!r){e.next=12;break}return i=t.filter((function(e){return e.id===r})),l=U(i,1),o=l[0],e.next=10,Y({paletizacao_id:r,token:a});case 10:c=e.sent,E.setFieldsValue(M(M({},o),{},{paletizacao_id:o.id,paletizacao:V(c)}));case 12:k(!1);case 13:case"end":return e.stop()}}),e)})))()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.aggItem,a=r.cliente_cod,i=r.cliente_nome,l=r.item_cod,o=r.paletizacao_id;Z(e?function(e){return M(M({},e),{},{show:!e.show,record:{cliente_cod:a,cliente_nome:i,artigo_cod:l,paletizacao_id:o},forInput:t})}:function(e){return M(M({},e),{},{show:!e.show,record:M({},E.getFieldsValue(!0)),forInput:t})})},J=(0,r.useCallback)(L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),E.submit();case 2:case"end":return e.stop()}}),e)}))),[]);return r.createElement(r.Fragment,null,r.createElement(f.Z,{spinning:x,indicator:r.createElement(b.Z,{style:{fontSize:24},spin:!0}),tip:"A carregar..."},r.createElement($,{showWrapper:P,setShowWrapper:Z,parentReload:W}),r.createElement(d.Z,{form:E,name:"form-of-paletizacao",onFinish:B,onValuesChange:function(e,t){"paletizacao_id"in e&&N(e)}},r.createElement(u.lt,{id:"LAY-PALETIZACAO",guides:w,layout:"vertical",style:{width:"100%",padding:"0px"},schema:K,field:{margin:"2px",overflow:!1,guides:w,label:{enabled:!0,pos:"top",align:"start",vAlign:"center",wrap:!1,overflow:!1,colon:!0,ellipsis:!0},alert:{pos:"right",tooltip:!0,container:!0},layout:{top:"",right:"",center:"",bottom:"",left:""},addons:{},required:!0,style:{alignSelf:"top"}},fieldSet:{guides:w,wide:16,margin:"2px",layout:"horizontal",overflow:!1}},r.createElement(u.C3,null,r.createElement(s.Z,{style:{width:"100%"},left:r.createElement(u.C3,null,r.createElement(u.gN,{name:"paletizacao_id",layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Paletização",pos:"left"},addons:M({},E.getFieldValue("paletizacao_id")&&{right:r.createElement(p.Z,{onClick:function(){return H()},style:{marginLeft:"3px"},size:"small"},r.createElement(y.Z,{style:{fontSize:"16px"}}))})},r.createElement(u.mg,{allowClear:!0,size:"small",data:q,keyField:"id",textField:"designacao",optionsRender:function(e,t,n){return{label:r.createElement("div",{style:{display:"flex"}},r.createElement("div",{style:{width:"70px"}},r.createElement("b",null,e.contentor_id)),r.createElement("div",{style:{flex:1}},e[n]),r.createElement("div",{style:{width:"20px"}},"v.",e.versao)),value:e[t]}}}))),right:r.createElement(p.Z,{onClick:function(){return H(!0)}},"Novo Esquema")})),r.createElement(u.C3,null,!x&&E.getFieldValue("paletizacao_id")&&r.createElement(T,{record:E.getFieldsValue(!0),wrapForm:!1,forInput:!1,parentReload:W})))),i&&r.createElement(m.Z,{elId:i.current},r.createElement(g.Z,null,r.createElement(p.Z,{disabled:S,onClick:J,type:"primary"},"Guardar")))))}}}]);
//# sourceMappingURL=783ea95fdf2c55c39ced.chunk.js.map