"use strict";(self.webpackChunksgp=self.webpackChunksgp||[]).push([[51],{48090:(e,t,n)=>{n.r(t),n.d(t,{default:()=>we});n(79753),n(82526),n(41817),n(32165),n(68309),n(91038),n(74916),n(69070),n(47941),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(43371),n(82772),n(35666),n(66992),n(41539),n(88674),n(78783),n(33948),n(60285),n(41637),n(32564),n(47042),n(5735),n(83753),n(83710),n(21249);var r,a=n(67294),l=n(22262),i=n(34144),o=n(27484),c=n.n(o),u=(n(42705),n(42919)),s=n(23455),d=n(84636),m=n(63386),f=n(10438),p=n(58043),b=n(28479),y=(n(75935),n(16403)),g=n(96579),v=n(5368),w=n(7171),E=n(96974),h=n(75950),x=n(71577),S=n(60881),O=n(42239),Z=n(19650),k=n(92080),P=n(60816),z=n(32787),C=n(16114),I=n(40074),F=n(70507),j=n(11382),A=n(93194),D=n(69953),B=n(33381),R=n(9609),L=n(76570),T=n(57254),N=n(7085),U=n(85144),_=["index"],J=["title","editable","children","dataIndex","record","input","handleSave"];function V(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function q(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t,n,r,a,l,i){try{var o=e[l](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,a)}function G(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function i(e){M(l,r,a,i,o,"next",e)}function o(e){M(l,r,a,i,o,"throw",e)}i(void 0)}))}}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X,ee,te=x.Z.Group,ne=S.Z.Title,re=(0,a.lazy)((function(){return n.e(721).then(n.bind(n,84721))})),ae=function(e,t){return(0,m.J1)({},e,t).unknown(!0)},le=function(e){return(0,m.J1)({},e).unknown(!0)},ie=function(){return a.createElement(O.Z,{size:"small",options:[{value:"e"},{value:"ou"},{value:"!e"},{value:"!ou"}]})},oe=function(e){e.ordersField,e.customersField,e.itemsField,e.ordemFabricoStatusField;return[{fbobinagem:{label:"Nº Bobinagem",field:{type:"input",size:"small"}}},{fdata:{label:"Data Bobinagem",field:{type:"rangedate",size:"small"}}},{ftime:{label:"Início/Fim",field:{type:"rangetime",size:"small"}}},{fduracao:{label:"Duração",field:{type:"input",size:"small"},span:12}},{farea:{label:"Área",field:{type:"input",size:"small"},span:12},fdiam:{label:"Diâmetro",field:{type:"input",size:"small"},span:12}},{fcore:{label:"Core",field:{type:"input",size:"small"},span:12},fcomp:{label:"Comprimento",field:{type:"input",size:"small"},span:12}},{freldefeitos:{label:" ",field:ie,span:4},fdefeitos:{label:"Defeitos",field:{type:"selectmulti",size:"small",options:s.Me},span:20}},{festados:{label:"Estados",field:{type:"selectmulti",size:"small",options:s.av}}},{fcliente:{label:"Cliente",field:{type:"input",size:"small"}}},{fdestino:{label:"Destino",field:{type:"input",size:"small"}}}]},ce=function(e){var t=e.form,n=(e.dataAPI,(0,E.s0)()),r=a.createElement(a.Fragment,null,a.createElement("button",{onClick:function(){return n(-1)}},"go back")),l=a.createElement(Z.Z,null,a.createElement("div",{style:{display:"flex",flexDirection:"row",whiteSpace:"nowrap"}}),a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap"}},a.createElement(k.Z,{form:t,initialValues:{}},a.createElement(b.lt,{id:"tbt-of",schema:ae}))));return a.createElement(g.Z,{left:r,right:l})},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.form,n=e.dataAPI,r=e.columns,l=e.setShowFilter,i=e.showFilter,o=(0,a.useState)(!1),c=$(o,2),d=c[0],m=c[1],p=function(e,t){var r,a;if("filter"===e){!d&&m(!0);var l=K(K({},t),{},{fbobinagem:(0,f.B8)(null==t?void 0:t.fbobinagem,"any"),fdata:(0,f.TK)(null===(r=t.fdata)||void 0===r?void 0:r.formatted),ftime:(0,f.TK)(null===(a=t.ftime)||void 0===a?void 0:a.formatted),fduracao:(0,f.B8)(null==t?void 0:t.fduracao,"=="),fcliente:(0,f.B8)(null==t?void 0:t.fcliente,"any"),fdestino:(0,f.B8)(null==t?void 0:t.fdestino,"any")});n.addFilters(l),n.first(),n.fetchPost()}},y=function(e,n,r){if("filter"===e)t.setFieldsValue(r)},g=function(e,t,n,r){var a=new Blob(void 0!==r?[r,e]:[e],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var l=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(a):window.webkitURL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=l,i.setAttribute("download",t),void 0===i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(l)}),200)}},v=a.createElement(P.Z,{onClick:function(e){return E(e)}},a.createElement(P.Z.Item,{key:"pdf",icon:a.createElement(A.Z,{twoToneColor:"red"})},"Pdf"),a.createElement(P.Z.Item,{key:"excel",icon:a.createElement(D.Z,{twoToneColor:"#52c41a"})},"Excel"),a.createElement(P.Z.Item,{key:"word",icon:a.createElement(B.Z,null)},"Word")),E=function(){var e=G(regeneratorRuntime.mark((function e(t){var a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=n.getPostRequest()).parameters=K(K({},a.parameters),{},{config:"default",orientation:"landscape",template:"TEMPLATES-LIST/LIST-A4-${orientation}",title:"Ordens de Fabrico",export:t.key,cols:r}),delete a.parameters.cols.bobines,a.parameters.cols.area.title="Área m2",e.next=6,(0,u.n3)(a);case 6:l=e.sent,e.t0=t.key,e.next="pdf"===e.t0?10:"excel"===e.t0?12:"word"===e.t0?14:16;break;case 10:return g(l.data,"list-".concat((new Date).toJSON().slice(0,10),".pdf")),e.abrupt("break",16);case 12:return g(l.data,"list-".concat((new Date).toJSON().slice(0,10),".xlsx")),e.abrupt("break",16);case 14:return g(l.data,"list-".concat((new Date).toJSON().slice(0,10),".docx")),e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.createElement(a.Fragment,null,a.createElement(b.fS,{schema:oe({form:t}),filterRules:le(),form:t,width:350,setShowFilter:l,showFilter:i}),a.createElement(k.Z,{form:t,name:"fps",onFinish:function(e){return p("filter",e)},onValuesChange:y},a.createElement(b.lt,{id:"LAY-BOBINAGENS",layout:"horizontal",style:{width:"700px",padding:"0px"},schema:ae,field:{guides:!1,wide:[3,4,3,1.5,1.5],style:{marginLeft:"2px",alignSelf:"end"}},fieldSet:{guides:!1,wide:16,margin:!1,layout:"horizontal",overflow:!1}},a.createElement(b.gN,{name:"fbobinagem",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Nº Bobinagem",pos:"top"}},a.createElement(z.Z,{size:"small"})),a.createElement(b.gN,{name:"fdata",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Data Bobinagem",pos:"top"}},a.createElement(b.P,{size:"small"})),a.createElement(b.gN,{name:"ftime",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Início/Fim",pos:"top"}},a.createElement(b.WR,{size:"small",format:s.T_})),a.createElement(b.mZ,{label:{enabled:!1}},a.createElement(te,{size:"small",style:{marginLeft:"5px"}},a.createElement(x.Z,{style:{padding:"0px 3px"},onClick:function(){return t.submit()}},a.createElement(L.Z,null)),a.createElement(x.Z,{style:{padding:"0px 3px"}},a.createElement(w.Z,{style:{fontSize:"16px",marginTop:"2px"},onClick:function(){return l((function(e){return!e}))}})))),a.createElement(b.mZ,{label:{enabled:!1}},a.createElement(C.Z,{overlay:v},a.createElement(x.Z,{size:"small",icon:a.createElement(R.Z,null)},a.createElement(T.Z,null)))))))},se=i.ZP.div(r||(X=["\n    border:dashed 1px #000;\n    background-color:",";\n    border-radius:3px;\n    margin-right:1px;\n    text-align:center;\n    width:25px;\n    font-size:9px;\n    cursor:pointer;\n    &:hover {\n        border-color: #d9d9d9;\n    }\n"],ee||(ee=X.slice(0)),r=Object.freeze(Object.defineProperties(X,{raw:{value:Object.freeze(ee)}}))),(function(e){return e.color})),de=(0,l.QM)({columnBobines:{width:"25px",textAlign:"center",marginRight:"1px"}}),me=function(e){var t=e.n,n=de();return a.createElement("div",{style:{display:"flex",flexDirection:"row"}},q(Array(t)).map((function(e,t){return a.createElement("div",{className:n.columnBobines,key:"bh-".concat(t)},t+1)})))},fe=function(e){var t=e.b,n=e.bm,r=e.setShow,l=t,i=function(){r({show:!0,data:{bobinagem_id:n.id,bobinagem_nome:n.nome}})};return a.createElement("div",{style:{display:"flex",flexDirection:"row"}},l.map((function(e,t){return a.createElement(se,{onClick:i,color:(n=e.estado,"G"===n?"#237804":"DM"===n?"#fadb14":"R"===n?"#ff1100":"LAB"===n?"#13c2c2":"BA"===n?"#ff1100":"IND"===n?"#0050b3":"HOLD"===n?"#391085":void 0),key:"bob-".concat(e.id)},a.createElement("b",null,e.estado),a.createElement("div",null,e.lar));var n})))},pe=a.createContext(null),be=function(e){e.index;var t=V(e,_),n=$(k.Z.useForm(),1)[0];return a.createElement(k.Z,{form:n,component:!1},a.createElement(pe.Provider,{value:n},a.createElement("tr",t)))},ye=function(e){var t=e.title,n=e.editable,r=e.children,l=e.dataIndex,i=e.record,o=e.input,c=e.handleSave,u=V(e,J),s=$((0,a.useState)(!1),2),d=s[0],m=s[1],f=(0,a.useRef)(null),p=(0,a.useContext)(pe);(0,a.useEffect)((function(){d&&f.current.focus()}),[d]);var b=function(){m(!d),p.setFieldsValue(W({},l,i[l]))},y=function(){var e=G(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.validateFields();case 3:t=e.sent,b(),c(K(K({},i),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=r;return n&&(g=d?a.createElement(k.Z.Item,{style:{margin:0},name:l,rules:[{required:!0,message:"".concat(t," is required.")}]},a.isValidElement(o)?a.cloneElement(o,K({ref:f,onPressEnter:y,onBlur:y},o.props)):a.createElement(z.Z,{ref:f,onPressEnter:y,onBlur:y})):a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:b},r)),a.createElement("td",u,g)},ge=function(e){var t=e.data;return a.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"}},a.createElement("div",{style:{fontSize:"14px",display:"flex",flexDirection:"row",alignItems:"center"}},a.createElement(Z.Z,null,a.createElement("div",null,a.createElement("b",{style:{textTransform:"capitalize"}}),"Validar/Classificar a Bobinagem ",t.bobinagem_nome))))},ve=function(e){var t=e.show,n=e.setShow,r=$(a.useState(!1),2),l=r[0];r[1];return a.createElement(a.Fragment,null,a.createElement(I.Z,{title:a.createElement(ge,{data:t.data}),visible:t.show,centered:!0,onCancel:function(){n({show:!1,data:{}})},confirmLoading:l,maskClosable:!0,footer:null,destroyOnClose:!0,bodyStyle:{height:"calc(100vh - 60px)"},width:"100%"},a.createElement(h.Z,null,a.createElement(a.Suspense,{fallback:a.createElement(a.Fragment,null)},a.createElement(re,{data:t.data})))))};const we=function(){var e=$((0,a.useState)(!1),2),t=e[0],n=(e[1],$((0,a.useState)([]),2)),r=n[0],l=n[1],i=$((0,a.useState)(!1),2),o=i[0],m=i[1],f=$((0,a.useState)({show:!1,data:{}}),2),b=f[0],g=f[1],w=$(k.Z.useForm(),1)[0],E=(0,d.E)({payload:{url:"".concat(s.T5,"/validarbobinagenslist/"),parameters:{},pagination:{enabled:!0,page:1,pageSize:10},filter:{},sort:[{column:"data",direction:"DESC"}]}}),h=document.getElementById("filter-tags"),x=((0,a.useContext)(U.Jb)||{}).data;(0,a.useEffect)((function(){var e=(0,u.BO)();return E.first(),E.fetchPost({token:e}),function(){return e.cancel()}}),[x]);var S,O={body:{row:be,cell:ye}},Z=(0,y.B)({dataAPI:E,data:E.getData().rows,uuid:"bobinagenslist_validar",include:K({},(S={idx:1,optional:!1},{nome:K({title:"Bobinagem",width:60,render:function(e){return a.createElement("span",{style:{color:"#096dd9",cursor:"pointer"}},e)}},S),inico:K({title:"Início",render:function(e,t){return c()("01-01-1970 "+e).format(s.T_)}},S),fim:K({title:"Fim",render:function(e,t){return c()("01-01-1970 "+e).format(s.T_)}},S),duracao:K({title:"Duração",width:20,render:function(e,t){return e}},S),core:K({title:"Core",width:5,render:function(e,t){return e}},S),comp:K({title:"Comp.",render:function(e,t){return e},editable:!0,input:a.createElement(F.Z,null)},S),comp_par:K({title:"Comp. Emenda",render:function(e,t){return e}},S),comp_cli:K({title:"Comp. Cliente",render:function(e,t){return e}},S),area:K({title:a.createElement("span",null,"Área m²"),render:function(e,t){return e}},S),diam:K({title:"Diâmetro mm",render:function(e,t){return e}},S),nwinf:K({title:"Nw Inf. m",render:function(e,t){return e}},S),nwsup:K({title:"Nw Sup. m",render:function(e,t){return e}},S),bobines:K({title:a.createElement(me,{n:28}),sorter:!1,render:function(e,t){return a.createElement(fe,{b:JSON.parse(e),bm:t,setShow:g})}},S)})),exclude:[]});return a.createElement(a.Fragment,null,a.createElement(j.Z,{spinning:t,indicator:a.createElement(N.Z,{style:{fontSize:24},spin:!0}),style:{top:"50%",left:"50%",position:"absolute"}},a.createElement(ve,{show:b,setShow:g}),a.createElement(ce,{form:w,dataAPI:E}),h&&a.createElement(v.Z,{elId:h},a.createElement(p.WH,{form:w,filters:E.getAllFilter(),schema:oe,rules:le()})),a.createElement(y.Z,{title:a.createElement(ne,{level:4},"Validar Bobinagens da Linha 1"),columnChooser:!1,reload:!0,stripRows:!0,darkHeader:!0,size:"small",toolbar:a.createElement(ue,{columns:null==Z?void 0:Z.report,form:w,dataAPI:E,setShowFilter:m,showFilter:o}),selection:{enabled:!1,rowKey:function(e){return function(e){return"".concat(e.id)}(e)},onSelection:l,multiple:!1,selectedRows:r,setSelectedRows:l},paginationProps:{pageSizeOptions:[10,15,20,30]},dataAPI:E,columns:Z,onFetch:E.fetchPost,components:O})))}}}]);
//# sourceMappingURL=c5efb7e3708f2fcebb2e.chunk.js.map