{"version":3,"file":"chunks/src_pages_planeamento_ordemFabrico_FormNwsCore_jsx.chunk.js","mappings":"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","sources":["webpack://sgp/./src/pages/planeamento/ordemFabrico/FormNwsCore.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, useRef,useContext } from 'react';\r\nimport { createUseStyles } from 'react-jss';\r\nimport styled from 'styled-components';\r\nimport dayjs from 'dayjs';\r\nimport Joi from 'joi';\r\nimport { fetch, fetchPost, cancelToken } from \"utils/fetch\";\r\nimport { API_URL } from \"config\";\r\nimport { WrapperForm, TitleForm, FormLayout, Field, FieldSet, Label, LabelField, FieldItem, AlertsContainer, Item, SelectField, InputAddon, VerticalSpace, HorizontalRule } from \"components/formLayout\";\r\nimport Toolbar from \"components/toolbar\";\r\nimport { Button, Spin, Input, Skeleton, Tooltip, InputNumber, DatePicker, TimePicker } from \"antd\";\r\nimport { LoadingOutlined, EditOutlined, InfoCircleOutlined } from '@ant-design/icons';\r\nimport { DATE_FORMAT, DATETIME_FORMAT, THICKNESS, ENROLAMENTO_OPTIONS } from 'config';\r\nimport FormNonwovens from './FormNonwovens';\r\nimport { dateTimeDiffValidator } from \"utils/schemaValidator\";\r\nimport { OFabricoContext } from './FormOFabricoValidar';\r\n\r\n\r\nconst loadCoresLookup = async (core, token) => {\r\n    const { data: { rows } } = await fetchPost({ url: `${API_URL}/materiasprimaslookup/`, filter: {}, parameters: { type: 'cores', core }, cancelToken: token });\r\n    return rows;\r\n}\r\n\r\nexport default ({ /* record, form, guides, schema, coreChangedValues, */ nwChangedValues /* fieldStatus */ }) => {\r\n    const { form, guides, schema, fieldStatus, ...ctx } = useContext(OFabricoContext);\r\n    const [loading, setLoading] = useState(true);\r\n    const [coresLookup, setCoresLookup] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const cancelFetch = cancelToken();\r\n        loadData({ token: cancelFetch });\r\n        return (() => cancelFetch.cancel(\"Form Requirements Cancelled\"));\r\n    }, []);\r\n\r\n    const loadData = ({ token }, type = \"init\") => {\r\n        switch (type) {\r\n            case \"lookup\":\r\n                setLoading(true);\r\n                (async () => {\r\n                    setCoresLookup(await loadCoresLookup(form.getFieldValue(\"artigo_core\"), token));\r\n                    setLoading(false);\r\n                })();\r\n                break;\r\n            default:\r\n                if (!loading) {\r\n                    setLoading(true);\r\n                }\r\n                (async () => {                   \r\n                    setCoresLookup(await loadCoresLookup(form.getFieldValue(\"artigo_core\"), token));\r\n                     setLoading(false);\r\n                })();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Spin spinning={loading} indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} tip=\"A carregar...\">\r\n            {!loading &&\r\n                <>\r\n                    <FormNonwovens forInput={false} /* record={ctx} form={form} guides={guides} schema={schema} */ changedValues={nwChangedValues} />\r\n                </>\r\n            }\r\n        </Spin >\r\n    );\r\n}"],"names":["React","useEffect","useState","useCallback","useRef","useContext","createUseStyles","styled","dayjs","Joi","fetch","fetchPost","cancelToken","API_URL","WrapperForm","TitleForm","FormLayout","Field","FieldSet","Label","LabelField","FieldItem","AlertsContainer","Item","SelectField","InputAddon","VerticalSpace","HorizontalRule","Toolbar","Button","Spin","Input","Skeleton","Tooltip","InputNumber","DatePicker","TimePicker","LoadingOutlined","EditOutlined","InfoCircleOutlined","DATE_FORMAT","DATETIME_FORMAT","THICKNESS","ENROLAMENTO_OPTIONS","FormNonwovens","dateTimeDiffValidator","OFabricoContext","loadCoresLookup","core","token","url","filter","parameters","type","rows","data","nwChangedValues","form","guides","schema","fieldStatus","ctx","loading","setLoading","coresLookup","setCoresLookup","cancelFetch","loadData","cancel","getFieldValue","fontSize"],"sourceRoot":""}