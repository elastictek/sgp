{"version":3,"file":"chunks/28/da716526d8411a7548ee.chunk.js","mappings":"ojEAiBA,IAAMA,EAAe,4CAAG,WAAOC,EAAMC,GAAb,yGACaC,EAAAA,EAAAA,IAAU,CAAEC,IAAK,GAAF,OAAKC,EAAAA,GAAL,0BAAsCC,OAAQ,GAAIC,WAAY,CAAEC,KAAM,QAASP,KAAAA,GAAQQ,YAAaP,IADhI,uBACJQ,EADI,EACZC,KAAQD,KADI,kBAEbA,GAFa,2CAAH,wDAKrB,iBAAe,GAAkG,IAAxCE,EAAwC,EAAxCA,gBACrE,GAAsDC,EAAAA,EAAAA,YAAWC,EAAAA,iBAAzDC,EAAR,EAAQA,KACR,GADA,EAAcC,OAAd,EAAsBC,OAAtB,EAA8BC,YAA9B,OACA,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,IAAOC,EAAP,KAAgBC,EAAhB,KACA,KAAsCF,EAAAA,EAAAA,UAAS,IAA/C,GAAoBG,GAApB,YAEAC,EAAAA,EAAAA,YAAU,WACN,IAAMC,GAAcf,EAAAA,EAAAA,MAEpB,OADAgB,EAAS,CAAEvB,MAAOsB,IACV,kBAAMA,EAAYE,OAAO,kCAClC,IAEH,IAAMD,EAAW,SAAC,GAA6B,IAA3BvB,EAA2B,EAA3BA,MAASM,EAAkB,uDAAX,OAChC,GACS,WADDA,EAEAa,GAAW,GACX,2BAAC,yGACGC,EADH,SACwBtB,EAAgBe,EAAKY,cAAc,eAAgBzB,GAD3E,kCAEGmB,GAAW,GAFd,0CAAD,QAMKD,GACDC,GAAW,GAEf,2BAAC,yGACGC,EADH,SACwBtB,EAAgBe,EAAKY,cAAc,eAAgBzB,GAD3E,kCAEImB,GAAW,GAFf,0CAAD,IAOZ,OACI,gBAAC,IAAD,CAAMO,SAAUR,EAASS,UAAW,gBAAC,IAAD,CAAiBC,MAAO,CAAEC,SAAU,IAAMC,MAAI,IAAKC,IAAI,kBACrFb,GACE,gCACI,gBAAC,IAAD,CAAec,UAAU,EAAsEC,cAAevB","sources":["webpack://sgp/./src/pages/planeamento/ordemFabrico/FormNwsCore.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, useRef,useContext } from 'react';\r\nimport { createUseStyles } from 'react-jss';\r\nimport styled from 'styled-components';\r\nimport dayjs from 'dayjs';\r\nimport Joi from 'joi';\r\nimport { fetch, fetchPost, cancelToken } from \"utils/fetch\";\r\nimport { API_URL } from \"config\";\r\nimport { WrapperForm, TitleForm, FormLayout, Field, FieldSet, Label, LabelField, FieldItem, AlertsContainer, Item, SelectField, InputAddon, VerticalSpace, HorizontalRule } from \"components/formLayout\";\r\nimport Toolbar from \"components/toolbar\";\r\nimport { Button, Spin, Input, Skeleton, Tooltip, InputNumber, DatePicker, TimePicker } from \"antd\";\r\nimport { LoadingOutlined, EditOutlined, InfoCircleOutlined } from '@ant-design/icons';\r\nimport { DATE_FORMAT, DATETIME_FORMAT, THICKNESS, ENROLAMENTO_OPTIONS } from 'config';\r\nimport FormNonwovens from './FormNonwovens';\r\nimport { dateTimeDiffValidator } from \"utils/schemaValidator\";\r\nimport { OFabricoContext } from './FormOFabricoValidar';\r\n\r\n\r\nconst loadCoresLookup = async (core, token) => {\r\n    const { data: { rows } } = await fetchPost({ url: `${API_URL}/materiasprimaslookup/`, filter: {}, parameters: { type: 'cores', core }, cancelToken: token });\r\n    return rows;\r\n}\r\n\r\nexport default ({ /* record, form, guides, schema, coreChangedValues, */ nwChangedValues /* fieldStatus */ }) => {\r\n    const { form, guides, schema, fieldStatus, ...ctx } = useContext(OFabricoContext);\r\n    const [loading, setLoading] = useState(true);\r\n    const [coresLookup, setCoresLookup] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const cancelFetch = cancelToken();\r\n        loadData({ token: cancelFetch });\r\n        return (() => cancelFetch.cancel(\"Form Requirements Cancelled\"));\r\n    }, []);\r\n\r\n    const loadData = ({ token }, type = \"init\") => {\r\n        switch (type) {\r\n            case \"lookup\":\r\n                setLoading(true);\r\n                (async () => {\r\n                    setCoresLookup(await loadCoresLookup(form.getFieldValue(\"artigo_core\"), token));\r\n                    setLoading(false);\r\n                })();\r\n                break;\r\n            default:\r\n                if (!loading) {\r\n                    setLoading(true);\r\n                }\r\n                (async () => {                   \r\n                    setCoresLookup(await loadCoresLookup(form.getFieldValue(\"artigo_core\"), token));\r\n                     setLoading(false);\r\n                })();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Spin spinning={loading} indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} tip=\"A carregar...\">\r\n            {!loading &&\r\n                <>\r\n                    <FormNonwovens forInput={false} /* record={ctx} form={form} guides={guides} schema={schema} */ changedValues={nwChangedValues} />\r\n                </>\r\n            }\r\n        </Spin >\r\n    );\r\n}"],"names":["loadCoresLookup","core","token","fetchPost","url","API_URL","filter","parameters","type","cancelToken","rows","data","nwChangedValues","useContext","OFabricoContext","form","guides","schema","fieldStatus","useState","loading","setLoading","setCoresLookup","useEffect","cancelFetch","loadData","cancel","getFieldValue","spinning","indicator","style","fontSize","spin","tip","forInput","changedValues"],"sourceRoot":""}