"use strict";(self.webpackChunksgp=self.webpackChunksgp||[]).push([[376],{96641:(e,t,r)=>{r.d(t,{Z:()=>p});r(47941),r(82772),r(82526),r(69070),r(57327),r(41539),r(38880),r(89554),r(54747),r(49337),r(33321);var n=r(67294),a=r(94184),o=r.n(a),i=r(22262),l=r(44405),c=["className","children"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var f=(0,i.QM)({svg:{cursor:"pointer",verticalAlign:"middle","&:active":{transform:"scale(0.8)",boxShadow:"1px 1px 5px rgba(0, 0, 0, 0.24)"},"&:hover":{"& path":{stroke:"#1890ff",strokeWidth:"2px"}}}});const p=function(e){var t=e.className,r=e.children,a=m(e,c),i=f();o()(t,i.tag);return n.createElement(l.Pd.Provider,{value:{className:i.svg}},n.cloneElement(r,s(s({},r.props),a)))}},99376:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Pe});r(35666),r(74916),r(15306),r(27207),r(26699),r(32023),r(65069),r(23123),r(23157),r(33161),r(9653),r(54678),r(92222),r(79753),r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(69070),r(47941),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321),r(88674);var n=r(67294),a=r(27484),o=r.n(a),i=r(42705),l=r.n(i),c=r(42919),u=r(23455),s=r(84636),d=r(63386),m=r(10438),f=r(58043),p=r(19258),g=(r(82772),r(19601),["showWrapper","setShowWrapper","parentReload","children","width"]);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const x=function(e){var t=e.showWrapper,r=e.setShowWrapper,a=e.parentReload,o=e.children,i=e.width,l=_(e,g),c=w((0,n.useState)({}),2),u=c[0],s=c[1],d=(0,n.useRef)(),m=t.record,f=void 0===m?{}:m,v=function(){r((function(e){return y(y({},e),{},{show:!e.show})}))};return n.createElement(p.JE,b({title:n.createElement(p.QF,{title:u.title,subTitle:u.subTitle}),type:"drawer",destroyOnClose:!0,mask:!0,setVisible:v,visible:t.show,width:i,bodyStyle:{height:"450px"},footer:n.createElement("div",{ref:d,id:"form-wrapper",style:{textAlign:"right"}})},l),n.cloneElement(o,y(y({},o.props),{},{setFormTitle:s,record:f,parentRef:d,closeParent:v,parentReload:a})))};var O=r(52110),S=r(96579),k=r(5368),F=r(7171),P=r(55902),j=r(2306),C=r(54397),A=r(94184),Z=r.n(A),I=r(22262);(0,I.QM)({progress:{height:"8px",width:"100%",overflow:"hidden",marginTop:"10px",backgroundColor:"#f5f5f5",borderRadius:"2px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.1)","& span":{position:"absolute",display:"block",width:"100%",color:"black"},"& .progress-bar":{float:"left",width:"0",height:"100%",color:"#fff",textAlign:"center",backgroundColor:"#91d5ff",boxShadow:"inset 0 -5px 0 rgb(0 0 0 / 15%)","& .show":{fontSize:"11px",marginTop:"-16px",display:"block!important"}},"& .progress-bar-success":{boxShadow:"inset 0 -5px 0 rgb(0 0 0 / 15%)",backgroundColor:"#389e0d"}}});r(44405);(0,I.QM)({svg:{cursor:"pointer",verticalAlign:"middle","& path":{stroke:"#0050b3",strokeWidth:"2px"},"&:active":{transform:"scale(0.8)",boxShadow:"1px 1px 5px rgba(0, 0, 0, 0.24)"},"&:hover":{"& path":{stroke:"#1890ff",strokeWidth:"2px"}}}});var D=r(60331),N=["className","children"];function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}function z(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var T=(0,I.QM)({tag:{cursor:"pointer","&:active":{transform:"scale(0.9)",boxShadow:"1px 1px 5px rgba(0, 0, 0, 0.24)"},"&:hover":{opacity:.8}}});const q=function(e){var t=e.className,r=e.children,a=z(e,N),o=T(),i=Z()(t,o.tag);return n.createElement(D.Z,R({className:i},a),r)};var L=r(81872),V=r(66204),M=r(40120),B=r(76160),W=r(71577),Y=r(60881),H=r(19650),U=r(41003),G=r(88999),K=r(32787),Q=r(69713),J=r(16114),$=r(11382),X=r(76570),ee=r(57119),te=r(68628),re=r(79508),ne=r(34707),ae=r(25592),oe=r(78338),ie=r(7085);function le(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){le(o,n,a,i,l,"next",e)}function l(e){le(o,n,a,i,l,"throw",e)}i(void 0)}))}}function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}M.Z.Option,B.Z.confirm;var ge=W.Z.Group,be=Y.Z.Title,ve=function(e,t){return(0,d.J1)({},e,t).unknown(!0)},ye=function(e){return(0,d.J1)({},e).unknown(!0)},he=function(e){var t=e.ordersField,r=e.customersField,n=e.itemsField;return[{f_ofabrico:{label:"Ordem de Fabrico"}},{f_agg:{label:"Agregação Ordem de Fabrico"}},{fofstatus:{label:"Ordem de Fabrico: Estado",field:e.ordemFabricoStatusField,initialValue:"all",ignoreFilterTag:function(e){return"all"===e}}},{fmulti_order:{label:"Nº Encomenda/Nº Proforma",field:t}},{fmulti_customer:{label:"Nº/Nome de Cliente",field:r}},{fmulti_item:{label:"Cód/Designação Artigo",field:n}},{forderdate:{label:"Data Encomenda",field:{type:"rangedate",size:"small"}}},{fstartprevdate:{label:"Data Prevista Início",field:{type:"rangedate",size:"small"}}},{fendprevdate:{label:"Data Prevista Fim",field:{type:"rangedate",size:"small"}}}]},we=function(e){var t=e.form,r=(e.dataAPI,e.setFlyoutStatus,e.flyoutStatus,e.ordemFabricoStatusField),a=n.createElement(n.Fragment,null),o=n.createElement(H.Z,null,n.createElement("div",{style:{display:"flex",flexDirection:"row",whiteSpace:"nowrap"}}),n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap"}},n.createElement(U.Z,{form:t,initialValues:{fofstatus:"all"}},n.createElement(p.lt,{id:"tbt-of",schema:ve},n.createElement(p.gN,{name:"fofstatus",label:{enabled:!0,width:"60px",text:"Estado",pos:"left"}},r())))));return n.createElement(S.Z,{left:a,right:o})},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.form,r=e.dataAPI,a=e.setShowFilter,o=e.showFilter,i=e.ordemFabricoStatusField,l=(0,n.useState)({}),s=me(l,2),d=(s[0],s[1],(0,n.useState)(!1)),f=me(d,2),g=f[0],b=f[1],v=function(e,t){var n,a,o;if("filter"===e){!g&&b(!0);var i=se(se({},t),{},{f_ofabrico:(0,m.B8)(null==t?void 0:t.f_ofabrico,"exact"),f_agg:(0,m.B8)(null==t?void 0:t.f_agg,"exact"),fmulti_customer:(0,m.B8)(null==t?void 0:t.fmulti_customer,"any"),fmulti_order:(0,m.B8)(null==t?void 0:t.fmulti_order,"any"),fmulti_item:(0,m.B8)(null==t?void 0:t.fmulti_item,"any"),forderdate:(0,m.TK)(null===(n=t.forderdate)||void 0===n?void 0:n.formatted),fstartprevdate:(0,m.TK)(null===(a=t.fstartprevdate)||void 0===a?void 0:a.formatted),fendprevdate:(0,m.TK)(null===(o=t.fendprevdate)||void 0===o?void 0:o.formatted)});r.addFilters(i),r.first(),r.fetchPost()}},y=function(e,r,n){if("filter"===e)t.setFieldsValue(n)},h=function(){var e=ce(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.SD)({url:"".concat(u.T5,"/sellcustomerslookup/"),pagination:{limit:10},filter:de({},"fmulti_customer","%".concat(t.replaceAll(" ","%%"),"%"))});case 2:return r=e.sent,n=r.data.rows,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=ce(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.SD)({url:"".concat(u.T5,"/sellorderslookup/"),pagination:{limit:10},filter:de({},"fmulti_order","%".concat(t.replaceAll(" ","%%"),"%"))});case 2:return r=e.sent,n=r.data.rows,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=ce(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.SD)({url:"".concat(u.T5,"/sellitemslookup/"),pagination:{limit:10},filter:de({},"fmulti_item","%".concat(t.replaceAll(" ","%%"),"%"))});case 2:return r=e.sent,n=r.data.rows,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){return n.createElement(p.K1,{placeholder:"Cliente",size:"small",keyField:"BPCNAM_0",textField:"BPCNAM_0",dropdownMatchSelectWidth:250,allowClear:!0,fetchOptions:h})},x=function(){return n.createElement(p.K1,{placeholder:"Encomenda/Prf",size:"small",keyField:"SOHNUM_0",textField:"computed",dropdownMatchSelectWidth:250,allowClear:!0,fetchOptions:w})},O=function(){return n.createElement(p.K1,{placeholder:"Artigo",size:"small",keyField:"ITMREF_0",textField:"computed",dropdownMatchSelectWidth:250,allowClear:!0,fetchOptions:E})};return n.createElement(n.Fragment,null,n.createElement(p.fS,{schema:he({form:t,ordersField:x,customersField:_,itemsField:O,ordemFabricoStatusField:i}),filterRules:ye(),form:t,width:350,setShowFilter:a,showFilter:o}),n.createElement(U.Z,{form:t,name:"fps",onFinish:function(e){return v("filter",e)},onValuesChange:y},n.createElement(p.lt,{id:"LAY-OFFLIST",layout:"horizontal",style:{width:"700px",padding:"0px"},schema:ve,field:{guides:!1,wide:[3,3,3,4,2],style:{marginLeft:"2px",alignSelf:"end"}},fieldSet:{guides:!1,wide:16,margin:!1,layout:"horizontal",overflow:!1}},n.createElement(p.gN,{name:"fmulti_customer",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Cliente",pos:"top"}},_()),n.createElement(p.gN,{name:"fmulti_order",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Encomenda/Prf",pos:"top"}},x()),n.createElement(p.gN,{name:"fmulti_item",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Artigo",pos:"top"}},O()),n.createElement(p.gN,{name:"forderdate",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Data Encomenda",pos:"top"}},n.createElement(p.P,{size:"small"})),n.createElement(p.mZ,{label:{enabled:!1}},n.createElement(ge,{size:"small",style:{marginLeft:"5px"}},n.createElement(W.Z,{style:{padding:"0px 3px"},onClick:function(){return t.submit()}},n.createElement(X.Z,null)),n.createElement(W.Z,{style:{padding:"0px 3px"}},n.createElement(F.Z,{style:{fontSize:"16px",marginTop:"2px"},onClick:function(){return a((function(e){return!e}))}})))))))},_e=function(e,t){return n.createElement(G.Z,{onClick:function(e){return t(e.key)}},e.includes("ignorar")&&n.createElement(G.Z.Item,{key:"ignorar",icon:n.createElement(L.VuA,{size:"18px"})},"Ignorar"),e.includes("reabrir")&&n.createElement(G.Z.Item,{key:"reabrir",icon:n.createElement(L.XRc,{size:"18px"})},"Reabrir"),e.includes("suspender")&&n.createElement(G.Z.Item,{key:"suspender",icon:n.createElement(L.M4U,{size:"18px"})},"A Aguardar..."),e.includes("iniciar")&&n.createElement(G.Z.Item,{key:"iniciar",icon:n.createElement(L.ilD,{size:"18px"})},"Em Curso..."))},xe=function(e,t){return(0,d.J1)({produto_cod:l().string().label("Designação do Produto").required(),artigo_formu:l().string().label("Fórmula").required(),artigo_nw1:l().string().label("Nonwoven 1").required(),artigo_width:l().number().integer().min(1).max(5e3).label("Largura").required(),artigo_diam:l().number().integer().min(1).max(5e3).label("Diâmetro").required(),artigo_core:l().number().integer().valid(3,6).label("Core").required(),artigo_gram:l().number().integer().min(1).max(1e3).label("Gramagem").required(),artigo_thickness:l().number().integer().min(0).max(5e3).label("Espessura").required()},e,t).unknown(!0)},Oe=function(e){e.status;var t=e.action,r=e.ofabrico;return n.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"}},n.createElement("div",null,n.createElement(ee.Z,{style:{color:"#faad14"}})),n.createElement("div",{style:{fontSize:"14px",display:"flex",flexDirection:"column"}},n.createElement("div",null,n.createElement("b",{style:{textTransform:"capitalize"}},t)," Ordem de Fabrico?"),n.createElement("div",{style:{color:"#1890ff"}},r)))},Se=function(e){e.status,e.temp_ofabrico,e.cliente_cod;var t=e.cliente_nome,r=e.iorder,a=e.item,o=e.item_nome,i=(e.ofabrico,e.produto_id),l=e.produto_cod;e.action;return i?n.createElement("div",null,"Confirmar a Ordem de Fabrico:",n.createElement("ul",null,n.createElement("li",null,"Produto ",n.createElement("b",null,l)),n.createElement("li",null,"Artigo ",n.createElement("b",null,a)),n.createElement("li",null,"Des.Artigo ",n.createElement("b",null,o)),r&&n.createElement("li",null,"Encomenda ",n.createElement("b",null,r)),r&&n.createElement("li",null,"Cliente ",n.createElement("b",null,t)))):n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null," Artigo ",n.createElement("b",null,a)),n.createElement("li",null,"Des.Artigo ",n.createElement("b",null,o)),r&&n.createElement("li",null,"Encomenda ",n.createElement("b",null,r)),r&&n.createElement("li",null,"Cliente ",n.createElement("b",null,t))),n.createElement("div",null,"Para Validar a Ordem de Fabrico tem de Confirmar/Preencher os seguintes dados:"),n.createElement(p.qL,null),n.createElement(p.lt,{id:"LAY-PROD",guides:!1,layout:"vertical",style:{width:"100%",padding:"0px"},schema:xe,fieldStatus:{},field:{forInput:!0,wide:[16],alert:{pos:"right",tooltip:!0,container:!1}},fieldSet:{guides:!1,wide:16}},n.createElement(p.C3,null,n.createElement(p.gN,{name:"produto_cod",label:{enabled:!1}},n.createElement(K.Z,{placeholder:"Designação do Produto",size:"small"}))),n.createElement(p.C3,{field:{wide:[4,4,4,4],margin:"2px"}},n.createElement(p.gN,{required:!1,label:{text:n.createElement(Q.Z,{title:"O código Gtin se deixado em branco será calculado automáticamente",color:"blue"},n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"3px"}},"Gtin",n.createElement(te.Z,{style:{color:"#096dd9"}})))},name:"artigo_gtin"},n.createElement(K.Z,{size:"small"})),n.createElement(p.gN,{required:!0,label:{text:"Fórmula"},name:"artigo_formu"},n.createElement(K.Z,{size:"small"})),n.createElement(p.gN,{required:!0,label:{text:"Nw1"},name:"artigo_nw1"},n.createElement(K.Z,{size:"small"})),n.createElement(p.gN,{required:!1,label:{text:"Nw2"},name:"artigo_nw2"},n.createElement(K.Z,{size:"small"}))),n.createElement(p.C3,{field:{wide:[3,3,3,3,3,"*"]}},n.createElement(p.gN,{required:!0,label:{text:"Largura"},name:"artigo_width"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(p.gN,{required:!0,label:{text:"Diâmetro"},name:"artigo_diam"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(p.gN,{required:!0,label:{text:"Core"},name:"artigo_core"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"''"),maxLength:1})),n.createElement(p.gN,{required:!0,label:{text:"Gramagem"},name:"artigo_gram"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(p.gN,{required:!0,label:{text:n.createElement(Q.Z,{title:"A espessura é usada como valor de referência, na conversão de metros² -> metros lineares.",color:"blue"},n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"3px"}},"Espessura",n.createElement(te.Z,{style:{color:"#096dd9"}})))},name:"artigo_thickness"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"µ"),maxLength:4})))))},ke=function(e){var t=e.showConfirm,r=e.setShowConfirm,a=me(U.Z.useForm(),1)[0],o=me(n.useState(!1),2),i=o[0],l=(o[1],me(n.useState("Content of the modal"),2)),c=(l[0],l[1],t.data),s=c.status,d=(c.temp_ofabrico,c.cliente_cod,c.cliente_nome,c.iorder,c.item,c.item_nome),m=c.ofabrico,f=c.produto_id,p=(c.produto_cod,c.action),g=c.onAction,b=me((0,n.useState)({}),2),v=b[0],y=b[1];(0,n.useEffect)((function(){if(!f&&m){var e,t={artigo_thickness:u.pR,produto_cod:void 0,artigo_gtin:void 0,artigo_core:void 0,artigo_formu:void 0,artigo_nw1:void 0,artigo_nw2:void 0,artigo_width:void 0,artigo_diam:void 0,artigo_gram:void 0},r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=fe(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(d.split(" ").reverse());try{for(r.s();!(e=r.n()).done;){var n=e.value;n.includes("''")||n.includes("'")?t.artigo_core=n.replaceAll("'",""):n.toUpperCase().startsWith("H")?t.artigo_formu=n.toUpperCase():n.toUpperCase().startsWith("ELA-")?t.artigo_nw1=n.toUpperCase():n.toLowerCase().startsWith("l")?t.artigo_width=n.toLowerCase().replaceAll("l",""):n.toLowerCase().startsWith("d")?t.artigo_diam=n.toLowerCase().replaceAll("d",""):(n.toLowerCase().startsWith("g")||!isNaN(n)&&Number.isInteger(parseFloat(n)))&&(t.artigo_gram=n.toLowerCase().replaceAll("g",""))}}catch(e){r.e(e)}finally{r.f()}y({}),a.setFieldsValue(se({},t))}}),[m]);var h=function(){var e=ce(regeneratorRuntime.mark((function e(n){var a,o,i,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f||!m){e.next=8;break}if((l=xe().validate(n,{abortEarly:!1})).error){e.next=6;break}return e.next=5,g(t.data,p,se(se({},n),{},{artigo_nome:d,main_gtin:u.qW}));case 5:i=e.sent;case 6:e.next=11;break;case 8:return e.next=10,g(t.data,p);case 10:i=e.sent;case 11:"error"===(null===(a=i)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.status)?y({error:[{message:i.data.title}]}):null!==(c=l)&&void 0!==c&&c.error||r({show:!1,data:{}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(B.Z,{title:n.createElement(Oe,{status:s,action:p,ofabrico:m}),visible:t.show,onOk:function(){return a.submit()},centered:!0,confirmLoading:i,onCancel:function(){r({show:!1,data:{}})},maskClosable:!1},n.createElement(U.Z,{form:a,name:"fpi",onFinish:h,component:"form"},n.createElement(C.Z,{formStatus:v}),n.createElement(Se,t.data))))},Fe=function(e){var t=e.record,r=e.onAction,a=(e.showConfirm,e.setShowConfirm),o=t.status,i=t.temp_ofabrico,l=t.cliente_cod,c=t.cliente_nome,u=t.iorder,s=t.item,d=t.item_nome,m=t.ofabrico,f=t.produto_id,p=t.produto_cod,g=t.qty_item,b=t.item_thickness,v=t.item_diam,y=t.item_core,h=t.item_width,w=t.item_id,E=me((0,n.useState)(),2),_=(E[0],E[1],function(e){a({show:!0,data:{status:o,temp_ofabrico:i,cliente_cod:l,cliente_nome:c,iorder:u,item:s,item_nome:d,ofabrico:m,produto_id:f,produto_cod:p,action:e,qty_item:g,item_thickness:b,item_diam:v,item_core:y,item_width:h,item_id:w,onAction:r}})});return n.createElement("div",{style:{display:"flex",flexDirection:"row"}},(0==o||!o)&&!i&&n.createElement(n.Fragment,null,n.createElement(q,{onClick:function(){return _("validar")},style:{width:"98px",textAlign:"center"},icon:n.createElement(re.Z,null),color:"#108ee9"},"Validar"),n.createElement(J.Z,{overlay:function(){return _e(["ignorar"],_)},trigger:["click"]},n.createElement(q,null,"..."))),(1==o||!o)&&i&&n.createElement(n.Fragment,null,n.createElement(q,{onClick:function(){return r(t,"preparing",(function(){}))},style:{width:"110px",textAlign:"center"},icon:n.createElement(ne.Z,null),color:"warning"},"Em Elaboração")),2==o&&i&&n.createElement(n.Fragment,null,n.createElement(q,{onClick:function(){return r(t,"preparing",(function(){}))},style:{width:"110px",textAlign:"center"},icon:n.createElement(ne.Z,null),color:"orange"},"Na Produção")),4==o&&n.createElement(n.Fragment,null,n.createElement(q,{onClick:function(){return showPopconfirm("finalizar")},style:{width:"98px",textAlign:"center"},icon:n.createElement(ae.Z,{spin:!0}),color:"processing"},"Em Curso"),n.createElement(J.Z,{overlay:function(){return _e(["reabrir","suspender"],showPopconfirm)},trigger:["click"]},n.createElement(q,null,"..."))),3==o&&n.createElement(n.Fragment,null,n.createElement(q,{onClick:function(){return showPopconfirm("iniciar")},style:{width:"98px",textAlign:"center"},icon:n.createElement(oe.Z,null),color:"warning"},"A Aguardar"),n.createElement(J.Z,{overlay:function(){return _e(["iniciar","reabrir"],showPopconfirm)},trigger:["click"]},n.createElement(q,null,"..."))),9==o&&n.createElement(n.Fragment,null,n.createElement(D.Z,{style:{width:"98px",textAlign:"center"},color:"error"},"Finalizada"),n.createElement(J.Z,{overlay:function(){return _e(["reabrir"],showPopconfirm)},trigger:["click"]},n.createElement(q,null,"..."))))};const Pe=function(){var e=me((0,n.useState)(!1),2),t=e[0],r=e[1],a=me((0,n.useState)([]),2),i=a[0],l=a[1],d=me((0,n.useState)(!1),2),g=d[0],b=d[1],v=me((0,n.useState)({show:!1}),2),y=v[0],h=v[1],w=me(U.Z.useForm(),1)[0],E=(0,s.E)({payload:{url:"".concat(u.T5,"/ofabricolist/"),parameters:{},pagination:{enabled:!0,page:1,pageSize:10},filter:{},sort:[{column:"ofabrico",direction:"DESC"}]}}),_=document.getElementById("filter-tags"),S=me((0,n.useState)({visible:!1,fullscreen:!1}),2),F=S[0],C=S[1],A=((0,n.useRef)(),me((0,n.useState)(!1),2)),Z=(A[0],A[1],me((0,n.useState)({show:!1,data:{}}),2)),I=Z[0],D=Z[1];(0,n.useEffect)((function(){var e=(0,c.BO)();return E.first(),E.fetchPost({token:e}),function(){return e.cancel()}}),[]);var N,R=function(){var e=ce(regeneratorRuntime.mark((function e(t,n,a){var o,i,l,s,d,m,f,p,g,b,v,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.cliente_cod,i=t.cliente_nome,l=t.iorder,s=t.item,d=t.ofabrico,m=t.produto_id,f=t.qty_item,p=t.item_diam,g=t.item_core,b=t.item_thickness,v=t.item_width,y=t.item_id,e.t0=n,e.next="validar"===e.t0?4:"ignorar"===e.t0?11:"preparing"===e.t0?18:"reabrir"===e.t0?20:"iniciar"===e.t0?22:"finalizar"===e.t0?24:"suspender"===e.t0?26:28;break;case 4:return r(!0),e.next=7,(0,c.SD)({url:"".concat(u.T5,"/savetempordemfabrico/"),parameters:{cliente_cod:o,cliente_nome:i,iorder:l,item:s,ofabrico:d,produto_id:m,artigo:a,qty_item:f,artigo_diam:p,artigo_core:g,artigo_width:v,item_id:y,artigo_thickness:b}});case 7:case 14:return"error"!==(w=e.sent).data.status&&E.fetchPost(),r(!1),e.abrupt("return",w);case 11:return r(!0),e.next=14,(0,c.SD)({url:"".concat(u.T5,"/ignorarordemfabrico/"),parameters:{ofabrico:d}});case 18:return h((function(e){return se(se({},e),{},{show:!e.show,record:t})})),e.abrupt("break",28);case 20:case 22:case 24:case 26:return e.abrupt("break",28);case 28:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),z=(0,O.B)({dataAPI:E,data:E.getData().rows,uuid:"ofabricolist",include:se({},(N={idx:1,optional:!1},{ofabrico:se({title:"Ordem Fabrico",width:140,render:function(e){return n.createElement("b",null,e)}},N),prf:se({title:"PRF",width:140,render:function(e){return n.createElement("b",null,e)}},N),iorder:se({title:"Encomenda(s)",width:140},N),estado:se({title:"",width:125,render:function(e,t){return n.createElement(Fe,{record:t,showConfirm:I,setShowConfirm:D,onAction:R})}},N),item_nome:se({title:"Artigo(s)",ellipsis:!0,render:function(e){return n.createElement("div",{style:{whiteSpace:"nowrap"}},e)}},N),cliente_nome:se({title:"Cliente(s)",ellipsis:!0,render:function(e){return n.createElement("div",{style:{whiteSpace:"nowrap"}},n.createElement("b",null,e))}},N),start_date:se({title:"Início Previsto",ellipsis:!0,render:function(e,t){return n.createElement("div",{style:{whiteSpace:"nowrap"}},n.createElement("b",null,o()(t.start_prev_date?t.start_prev_date:e).format(u.Cu)))}},N),end_date:se({title:"Fim Previsto",ellipsis:!0,render:function(e,t){return n.createElement("div",{style:{whiteSpace:"nowrap"}},n.createElement("b",null,o()(t.end_prev_date?t.end_prev_date:e).format(u.Cu)))}},N)})),exclude:[]}),T=function(){return n.createElement(p.mg,{keyField:"value",valueField:"label",style:{width:150},options:[{value:"all",label:"Todos"},{value:"notcreated",label:"Não Criada"},{value:"inpreparation",label:"Em Preparação"},{value:"inprogress",label:"Em Progresso"},{value:"finished",label:"Finalizada"}]})};return n.createElement(n.Fragment,null,n.createElement($.Z,{spinning:t,indicator:n.createElement(ie.Z,{style:{fontSize:24},spin:!0}),style:{top:"50%",left:"50%",position:"absolute"}},n.createElement(ke,{showConfirm:I,setShowConfirm:D}),n.createElement(x,{showWrapper:y,setShowWrapper:h,parentReload:E.fetchPost},n.createElement(V.Z,null)),n.createElement(P.Z,{flyoutWidth:"700px",flyoutStatus:F,style:{height:"100vh"}},n.createElement(P.Z.content,null,n.createElement(we,{form:w,dataAPI:E,setFlyoutStatus:C,flyoutStatus:F,ordemFabricoStatusField:T}),_&&n.createElement(k.Z,{elId:_},n.createElement(f.WH,{form:w,filters:E.getAllFilter(),schema:he,rules:ye()})),n.createElement(O.Z,{title:n.createElement(be,{level:4},"Ordens de Fabrico"),columnChooser:!1,reload:!0,stripRows:!0,darkHeader:!0,size:"small",toolbar:n.createElement(Ee,{form:w,dataAPI:E,setShowFilter:b,showFilter:g,ordemFabricoStatusField:T}),selection:{enabled:!1,rowKey:function(e){return function(e){return"".concat(e.ofabrico,"-").concat((0,m.wh)(e.item,void 0),"-").concat((0,m.wh)(e.iorder,void 0))}(e)},onSelection:l,multiple:!1,selectedRows:i,setSelectedRows:l},paginationProps:{pageSizeOptions:[10,15,20,30]},dataAPI:E,columns:z,onFetch:E.fetchPost})),n.createElement(P.Z.flyout,null,n.createElement(j.Z.Header,{fullScreen:!1,setStatus:C,left:n.createElement(be,{level:4,style:{marginBottom:"0px"}},"Title")}),n.createElement(j.Z.Body,null)))))}},87513:(e,t,r)=>{r.d(t,{Z:()=>M});r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(74916),r(69070),r(47941),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321),r(88674),r(82772),r(79753),r(35666);var n=r(67294),a=(r(27484),r(42705),r(42919)),o=r(23455),i=r(19258),l=(r(96579),r(11382)),c=r(71577),u=r(7085),s=r(8212),d=(r(92222),r(26699),r(32023),r(63386)),m=r(54397),f=r(26402),p=r(5368),g=r(41003),b=r(32787),v=r(19650),y=r(66204);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){k(o,n,a,i,l,"next",e)}function l(e){k(o,n,a,i,l,"throw",e)}i(void 0)}))}}var P=function(e,t){return(0,d.J1)({},e,t).unknown(!0)},j=function(){var e=F(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.SD)({url:"".concat(o.T5,"/materiasprimaslookup/"),filter:{},parameters:{type:"nonwovens"},cancelToken:t});case 2:return r=e.sent,n=r.data.rows,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const C=function(e){var t,r=e.record,l=e.setFormTitle,u=e.parentRef,s=e.closeParent,d=e.parentReload,h=e.wrapForm,E=void 0===h?"form":h,O=e.forInput,S=e.changedValues,k=e.parentLoading,C=(0,n.useContext)(y.d),A=x(g.Z.useForm(),1)[0],Z=x((0,n.useState)(!0),2),I=(Z[0],Z[1],x((0,n.useState)({error:[],warning:[],info:[],success:[]}),2)),D=I[0],N=I[1],R=x((0,n.useState)(!1),2),z=R[0],T=R[1],q=x((0,n.useState)((t=r.nonwovens_id)?{key:"update",values:{id:t}}:{key:"insert",values:{}}),2),L=q[0],V=(q[1],x((0,n.useState)({status:"none"}),2)),M=V[0],B=V[1],W=x((0,n.useState)(),2),Y=W[0],H=W[1],U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.nonwovens,a=e.nonwovens_id,o=e.token;F(regeneratorRuntime.mark((function e(){var r,i,c,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!t&&Y){e.next=6;break}return e.next=4,j(o);case 4:r=e.sent,H(r);case 6:i={},a&&(r||(r=Y),c=n.filter((function(e){return e.id===a})),u=x(c,1),(s=u[0])&&(i={nw_cod_sup:{key:s.nw_cod_sup,value:s.nw_cod_sup,label:s.nw_des_sup},nw_cod_inf:{key:s.nw_cod_inf,value:s.nw_cod_inf,label:s.nw_des_inf},designacao:s.designacao})),"update"===L.key?l&&l({title:"Editar Nonwovens ".concat(C.item_cod),subTitle:"".concat(C.item_nome)}):l&&l({title:"Definir Nonwovens ".concat(C.item_cod),subTitle:"".concat(C.item_nome)}),A.setFieldsValue(i);case 10:case"end":return e.stop()}}),e)})))()};(0,n.useEffect)((function(){var e=(0,a.BO)();return S||U({nonwovens_id:r.nonwovens_id,token:e}),function(){return e.cancel("Form Nonwovens Upsert Cancelled")}}),[]),(0,n.useEffect)((function(){var e=(0,a.BO)();return S&&!k&&U("nonwovens_id"in S?{nonwovens_id:S.nonwovens_id,token:e}:{nonwovens_id:r.nonwovens_id,token:e}),function(){return e.cancel("Form Nonwovens Upsert Cancelled")}}),[S,k]);var G=function(){var e=F(regeneratorRuntime.mark((function e(t){var r,n,i,l,c,u,s,m,f,p,g,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={error:[],warning:[],info:[],success:[]},l=[],c=P().validate(t,{abortEarly:!1}),i.error=[].concat(_(i.error),_(c.error?null===(r=c.error)||void 0===r?void 0:r.details.filter((function(e){return l.includes(e.context.key)})):[])),i.warning=[].concat(_(i.warning),_(c.warning?null===(n=c.warning)||void 0===n?void 0:n.details.filter((function(e){return l.includes(e.context.key)})):[])),c.error,0!==i.error.length){e.next=18;break}return u=t.nw_cod_sup,s=(u=void 0===u?{}:u).value,m=u.label,f=t.nw_cod_inf,p=(f=void 0===f?{}:f).value,g=f.label,e.next=15,(0,a.SD)({url:"".concat(o.T5,"/newartigononwovens/"),parameters:w(w({},t),{},{produto_id:C.produto_id,nw_cod_sup:s,nw_des_sup:m,nw_cod_inf:p,nw_des_inf:g})});case 15:"error"!==(b=e.sent).data.status&&d({},"lookup"),B(b.data);case 18:N(i);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){s()};return n.createElement(n.Fragment,null,n.createElement(f.Z,{result:M,successButtonOK:"insert"===L.key&&n.createElement(c.Z,{type:"primary",key:"goto-of",onClick:function(){"insert"===L.key&&(A.resetFields(),U(),B({status:"none"}))}},"Definir Nonwovens"),successButtonClose:n.createElement(c.Z,{key:"goto-close",onClick:function(){return K(!0)}},"Fechar"),errorButtonOK:n.createElement(c.Z,{type:"primary",key:"goto-ok",onClick:function(){B({status:"none"})}},"OK"),errorButtonClose:n.createElement(c.Z,{key:"goto-close",onClick:K},"Fechar")},n.createElement(i.NH,{id:"el-external"}),n.createElement(m.Z,{formStatus:D}),n.createElement(g.Z,{form:A,name:"fps",onFinish:G,component:E},n.createElement(i.lt,{id:"LAY-NONWOVENS-UPSERT",guides:z,layout:"vertical",style:{width:"100%",padding:"0px"},schema:P,field:{forInput:O,wide:[16],margin:"2px",overflow:!1,guides:z,label:{enabled:!0,pos:"top",wrap:!1,overflow:!1,colon:!1,ellipsis:!0},alert:{pos:"right",tooltip:!0,container:!1},layout:{top:"",right:"",center:"",bottom:"",left:""},required:!0,style:{alignSelf:"top"}},fieldSet:{guides:z,wide:16,margin:"2px",layout:"horizontal",overflow:!1}},O&&n.createElement(n.Fragment,null,n.createElement(i.C3,{margin:!1,field:{wide:[6,4]}},n.createElement(i.gN,{name:"designacao",label:{enabled:!1}},n.createElement(b.Z,{placeholder:"Designação",size:"small"}))),n.createElement(i.qL,{height:"12px"})),n.createElement(i.gN,{wide:10,name:"nw_cod_sup",label:{text:"".concat(O?"Nonwoven ":"","Superior")},required:!1},n.createElement(i.mg,{size:"small",data:Y,keyField:"ITMREF_0",textField:"ITMDES1_0",optionsRender:function(e,t,r){return{label:"".concat(e[r]),value:e[t]}},showSearch:!0,labelInValue:!0,filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})),n.createElement(i.gN,{wide:10,name:"nw_cod_inf",label:{text:"".concat(O?"Nonwoven ":"","Inferior")},required:!1},n.createElement(i.mg,{size:"small",data:Y,keyField:"ITMREF_0",textField:"ITMDES1_0",optionsRender:function(e,t,r){return{label:"".concat(e[r]),value:e[t]}},labelInValue:!0,showSearch:!0,filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})))),u&&n.createElement(p.Z,{elId:u.current},n.createElement(v.Z,null,n.createElement(c.Z,{type:"primary",onClick:function(){return A.submit()}},"Guardar"),n.createElement(c.Z,{onClick:function(){return T(!z)}},z?"No Guides":"Guides")))))};var A=["form","guides","schema","fieldStatus"];function Z(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function I(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){I(o,n,a,i,l,"next",e)}function l(e){I(o,n,a,i,l,"throw",e)}i(void 0)}))}}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t=e.showWrapper,r=e.setShowWrapper,a=e.parentReload,o=T((0,n.useState)({}),2),l=o[0],c=o[1],u=(0,n.useRef)(),s=t.record,d=void 0===s?{}:s,m=t.forInput,f=function(){r((function(e){return R(R({},e),{},{show:!e.show})}))};return n.createElement(i.JE,{title:n.createElement(i.QF,{title:l.title,subTitle:l.subTitle}),type:"drawer",destroyOnClose:!0,mask:!0,setVisible:f,visible:t.show,width:800,bodyStyle:{height:"450px"},footer:n.createElement("div",{ref:u,id:"form-wrapper",style:{textAlign:"right"}})},n.createElement(C,{setFormTitle:c,record:d,parentRef:u,closeParent:f,parentReload:a,forInput:m}))},V=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.produto_id,n=t.token,e.next=3,(0,a.SD)({url:"".concat(o.T5,"/nonwovenslookup/"),filter:{produto_id:r},sort:[],cancelToken:n});case 3:return i=e.sent,l=i.data.rows,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const M=function(e){var t=e.changedValues,r=(0,n.useContext)(y.d),o=r.form,d=r.guides,m=r.schema,f=(r.fieldStatus,Z(r,A)),p=T((0,n.useState)(!0),2),g=p[0],b=p[1],v=T((0,n.useState)({show:!1}),2),h=v[0],w=v[1],E=T((0,n.useState)([]),2),_=E[0],x=E[1];(0,n.useEffect)((function(){var e=f.produto_id,t=(0,a.BO)();return O({nonwovens_id:o.getFieldValue("nonwovens_id"),produto_id:e,token:t}),function(){return t.cancel("Form Nonwovens Cancelled")}}),[]),(0,n.useEffect)((function(){var e=(0,a.BO)();return function(){return e.cancel("Form Nonwovens Cancelled")}}),[t]);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init",r=f.produto_id,n=e.token;if("lookup"===t)b(!0),D(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,V({produto_id:r,token:n});case 3:e.t1=e.sent,(0,e.t0)(e.t1),b(!1);case 6:case"end":return e.stop()}}),e)})))();else g||b(!0),D(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_,!r){e.next=6;break}return e.next=4,V({produto_id:r,token:n});case 4:t=e.sent,x(t);case 6:b(!1);case 7:case"end":return e.stop()}}),e)})))()},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w(e?function(e){return R(R({},e),{},{show:!e.show,record:{},forInput:t})}:function(e){return R(R({},e),{},{show:!e.show,record:R(R({},o.getFieldsValue(["nonwovens_id"])),{},{nonwovens:_}),forInput:t})})};return n.createElement(n.Fragment,null,n.createElement(l.Z,{spinning:g,indicator:n.createElement(u.Z,{style:{fontSize:24},spin:!0}),tip:"A carregar..."},n.createElement(L,{showWrapper:h,setShowWrapper:w,parentReload:O}),n.createElement(i.lt,{id:"LAY-NONWOVENS",guides:d,layout:"vertical",style:{width:"100%"},schema:m,field:{margin:"2px",overflow:!1,guides:d,label:{enabled:!0,pos:"top",align:"start",vAlign:"center",width:"80px",wrap:!1,overflow:!1,colon:!1,ellipsis:!0},alert:{pos:"right",tooltip:!0,container:!0},layout:{top:"",right:"",center:"",bottom:"",left:""},addons:{},required:!0,style:{alignSelf:"top"}},fieldSet:{guides:d,wide:16,margin:"2px",layout:"horizontal",overflow:!1}},n.createElement(i.qL,null),n.createElement(i.bo,{title:"2. Nonwovens"}),n.createElement(i.qL,null),n.createElement(i.C3,{margin:!1,field:{wide:[6,2]},style:{alignItems:"center"}},n.createElement(i.gN,{name:"nonwovens_id",layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!1,text:"Nonwovens",pos:"left"},addons:R({},o.getFieldValue("nonwovens_id")&&{right:n.createElement(c.Z,{onClick:function(){return S(!1,!0)},style:{marginLeft:"3px"},size:"small"},n.createElement(s.Z,{style:{fontSize:"16px"}}))})},n.createElement(i.mg,{size:"small",data:_,keyField:"id",textField:"designacao",optionsRender:function(e,t,r){return{label:n.createElement("div",{style:{display:"flex"}},n.createElement("div",{style:{minWidth:"150px"}},n.createElement("b",null,e[r])),n.createElement("div",null,"v.",e.versao)),value:e[t]}}})),n.createElement(i.ck,null,n.createElement(c.Z,{onClick:function(){return S(!0,!0)},size:"small"},"Novo"))),n.createElement(i.C3,{margin:!1},n.createElement(C,{parentLoading:g,record:R({nonwovens:_},o.getFieldsValue(["nonwovens_id"])),wrapForm:!1,forInput:!1,parentReload:O,changedValues:t})))))}},66204:(e,t,r)=>{r.d(t,{d:()=>fe,Z:()=>be});r(35666),r(66992),r(41539),r(88674),r(78783),r(33948),r(92222),r(56977),r(57327),r(26699),r(32023),r(79753),r(82526),r(41817),r(32165),r(47042),r(68309),r(91038),r(74916),r(69070),r(47941),r(38880),r(89554),r(54747),r(49337),r(33321);var n=r(67294),a=r(27484),o=r.n(a),i=r(42705),l=r.n(i),c=r(42919),u=r(23455),s=(r(84636),r(10438)),d=r(63386),m=r(19258),f=(r(82772),r(19601),r(22262)),p=r(94184),g=r.n(p),b=r(58634),v=["children","className","dark"];function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var w=(0,f.QM)({dark1:{"& > .ant-tabs-nav":{backgroundColor:"#f0f0f0!important"},"& .ant-tabs-tab":{backgroundColor:"#d9d9d9!important"},"& .ant-tabs-tab-active":{backgroundColor:"#fff!important"}}}),E=b.Z.TabPane;const _=function(e){var t,r,a,o=e.children,i=e.className,l=e.dark,c=void 0===l?0:l,u=h(e,v),s=w(),d=g()(i,(t={},r=s.dark1,a=1===c,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t));return n.createElement(b.Z,y({className:d},u),o)};var x=r(54397),O=r(26402),S=(r(96641),r(5368)),k=r(40120),F=r(41003),P=r(11382),j=r(71577),C=r(19650),A=r(7085),Z=(r(65069),r(23123),r(15306),r(27207),r(23157),r(33161),r(9653),r(54678),r(91058),r(96579),r(32787)),I=r(69713),D=r(48052),N=r(70507),R=r(68628),z=(r(87513),r(85144),["form","guides","schema","fieldStatus"]);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function B(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=W(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function W(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function U(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){H(o,n,a,i,l,"next",e)}function l(e){H(o,n,a,i,l,"throw",e)}i(void 0)}))}}var G=Z.Z.TextArea,K=function(){var e=U(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.SD)({url:"".concat(u.T5,"/materiasprimaslookup/"),filter:{},parameters:{type:"cores",core:t},cancelToken:r});case 2:return n=e.sent,a=n.data.rows,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Q=function(){var e=U(regeneratorRuntime.mark((function e(t,r){var n,a,o,i,l,s,d,m,f,p,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.item_cod,a=t.item_nome,o=t.produto_cod,i={},l=!1,e.next=5,(0,c.SD)({url:"".concat(u.T5,"/sellitemsdetailsget/"),filter:{cod:n},cancelToken:r});case 5:if(s=e.sent,!((d=s.data.rows).length>0)){e.next=12;break}l=!0,i={artigo_id:d[0].id,artigo_nw1:d[0].nw1,artigo_nw2:d[0].nw2,artigo_width:d[0].lar,artigo_formula:d[0].formu,artigo_diam:d[0].diam_ref,artigo_core:d[0].core,artigo_gram:d[0].gsm,artigo_gtin:d[0].gtin,artigo_thickness:d[0].thickness,produto_cod:d[0].produto_cod},e.next=42;break;case 12:m=a.split(" ").reverse(),i.produto_cod=o,i.artigo_thickness=u.pR,f=B(m),e.prev=16,f.s();case 18:if((p=f.n()).done){e.next=34;break}if(!(g=p.value).includes("''")&&!g.includes("'")){e.next=23;break}return i.artigo_core=g.replaceAll("'",""),e.abrupt("continue",32);case 23:if(!g.toLowerCase().startsWith("l")){e.next=26;break}return i.artigo_width=g.toLowerCase().replaceAll("l",""),e.abrupt("continue",32);case 26:if(!g.toLowerCase().startsWith("d")){e.next=29;break}return i.artigo_diam=g.toLowerCase().replaceAll("d",""),e.abrupt("continue",32);case 29:if(!(g.toLowerCase().startsWith("g")||!isNaN(g)&&Number.isInteger(parseFloat(g)))){e.next=32;break}return i.artigo_gram=g.toLowerCase().replaceAll("g",""),e.abrupt("continue",32);case 32:e.next=18;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(16),f.e(e.t0);case 39:return e.prev=39,f.f(),e.finish(39);case 42:return e.abrupt("return",{artigo:i,exists:l});case 43:case"end":return e.stop()}}),e,null,[[16,36,39,42]])})));return function(t,r){return e.apply(this,arguments)}}();const J=function(e){var t=e.changedValues,r=(0,n.useContext)(fe),a=r.form,i=r.guides,l=r.schema,d=r.fieldStatus,f=M(r,z),p=V((0,n.useState)(!0),2),g=p[0],b=p[1],v=V((0,n.useState)([]),2),y=(v[0],v[1]),h=V((0,n.useState)(!0),2),w=h[0],E=h[1];(0,n.useEffect)((function(){var e=(0,c.BO)();return _({token:e}),function(){return e.cancel("Form Requirements Cancelled")}}),[]),(0,n.useEffect)((function(){}),[t]);var _=function(e){var t=e.token,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init";if("lookup"===r)b(!0),U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,K(a.getFieldValue("artigo_core"),t);case 3:e.t1=e.sent,(0,e.t0)(e.t1),b(!1);case 6:case"end":return e.stop()}}),e)})))();else g||b(!0),U(regeneratorRuntime.mark((function e(){var r,n,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(f,t);case 2:return r=e.sent,n=r.artigo,i=r.exists,n.qty_item=f.qty_item,e.t0=y,e.next=9,K(n.artigo_core,t);case 9:e.t1=e.sent,(0,e.t0)(e.t1),E(i),l={start_prev_date:o()((0,s.nb)(a.getFieldValue("start_prev_date"),f.sage_start_date),"YYYY-MM-DD HH:mm:ss"),end_prev_date:o()((0,s.nb)(a.getFieldValue("end_prev_date"),f.sage_end_date),"YYYY-MM-DD HH:mm:ss"),f_amostragem:a.getFieldValue("amostragem")?a.getFieldValue("amostragem"):4,sentido_enrolamento:a.getFieldValue("sentido_enrolamento")?parseInt(a.getFieldValue("sentido_enrolamento")):1,observacoes:a.getFieldValue("observacoes")?a.getFieldValue("observacoes"):""},a.setFieldsValue(q(q({},n),l)),b(!1);case 15:case"end":return e.stop()}}),e)})))()};return n.createElement(P.Z,{spinning:g,indicator:n.createElement(A.Z,{style:{fontSize:24},spin:!0}),tip:"A carregar..."},!g&&n.createElement(n.Fragment,null,n.createElement(m.lt,{id:"LAY-REQ",guides:i,layout:"vertical",style:{width:"100%",padding:"0px"},schema:l,fieldStatus:d,field:{wide:[4,4,"*"],margin:"2px",overflow:!0,guides:i,label:{enabled:!0,pos:"top",align:"start",vAlign:"center",wrap:!1,overflow:!1,colon:!1,ellipsis:!0},alert:{pos:"alert",tooltip:!1,container:!0},layout:{top:"",right:"",center:"align-self: center;",bottom:"",left:""},required:!0,style:{alignSelf:"center"}},fieldSet:{guides:i,wide:16,margin:!1,layout:"horizontal",overflow:!1}},n.createElement(m.C3,{margin:!1,layout:"vertical"},n.createElement(m.bo,{title:"1. Artigo",description:a.getFieldValue("produto_cod")}),n.createElement(m.C3,null,n.createElement(m.gN,{forInput:!w,required:!1,label:{text:"Gtin"},name:"artigo_gtin"},n.createElement(Z.Z,{size:"small"})),n.createElement(m.NH,{style:{alignSelf:"end",paddingBottom:"2px"},main:!0})),n.createElement(m.C3,{field:{wide:[2,2,1,2,2,"*"]}},n.createElement(m.gN,{forInput:!w,required:!1,label:{text:"Largura"},name:"artigo_width"},n.createElement(m.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(m.gN,{forInput:!w,required:!1,label:{text:"Diâmetro"},name:"artigo_diam"},n.createElement(m.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(m.gN,{forInput:!w,required:!1,label:{text:"Core"},name:"artigo_core"},n.createElement(m.ID,{size:"small",addonAfter:n.createElement("b",null,"''"),maxLength:1})),n.createElement(m.gN,{forInput:!w,required:!1,label:{text:"Gramagem"},name:"artigo_gram"},n.createElement(m.ID,{size:"small",addonAfter:n.createElement("b",null,"gsm"),maxLength:4})),n.createElement(m.gN,{forInput:!w,required:!1,label:{text:n.createElement(I.Z,{title:"A espessura é usada como valor de referência, na conversão de metros² -> metros lineares.",color:"blue"},n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"3px"}},"Espessura",n.createElement(R.Z,{style:{color:"#096dd9"}})))},name:"artigo_thickness"},n.createElement(m.ID,{size:"small",addonAfter:n.createElement("b",null,"µ"),maxLength:4})),n.createElement(m.NH,{style:{alignSelf:"end",paddingBottom:"2px"},main:!0}))),n.createElement(m.qL,null),n.createElement(m.bo,{title:"2. Planificação"}),n.createElement(m.C3,{field:{wide:[3,3,4],label:{pos:"top",wrap:!0,ellipsis:!1,width:"130px"}}},n.createElement(m.gN,{required:!0,label:{text:"Data Prevista Início"},name:"start_prev_date"},n.createElement(D.Z,{showTime:!0,size:"small"})),n.createElement(m.gN,{required:!0,label:{text:"Data Prevista Fim"},name:"end_prev_date"},n.createElement(D.Z,{showTime:!0,size:"small"})),n.createElement(m.NH,{style:{alignSelf:"end",paddingBottom:"6px"},main:!0})),n.createElement(m.qL,null),n.createElement(m.bo,{title:"3. Amostragem, Enrolamento e Observações"}),n.createElement(m.qL,null),n.createElement(m.C3,{margin:!1,field:{wide:4,style:{alignSelf:"left"},label:{pos:"top",wrap:!1,ellipsis:!1,width:"130px"}},layout:"vertical"},n.createElement(m.C3,{margin:!1},n.createElement(m.gN,{wide:4,name:"sentido_enrolamento",label:{enabled:!0,text:"Sentido Enrolamento"}},n.createElement(m.mg,{size:"small",data:u.qB,keyField:"value",textField:"label",optionsRender:function(e,t,r){return{label:e[r],value:e[t]}}})),n.createElement(m.gN,{wide:2,label:{text:"Amostragem"},name:"f_amostragem"},n.createElement(N.Z,{size:"small",min:0,max:100}))),n.createElement(m.gN,{required:!1,wide:16,label:{text:"Observações"},name:"observacoes"},n.createElement(G,{autoSize:{minRows:4,maxRows:6},allowClear:!0,maxLength:3e3}))))))};function $(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oe(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){oe(o,n,a,i,l,"next",e)}function l(e){oe(o,n,a,i,l,"throw",e)}i(void 0)}))}}k.Z.Option,k.Z.OptGroup;var le=n.lazy((function(){return Promise.all([r.e(216),r.e(5)]).then(r.bind(r,88005))})),ce=n.lazy((function(){return r.e(283).then(r.bind(r,84283))})),ue=n.lazy((function(){return r.e(295).then(r.bind(r,5295))})),se=n.lazy((function(){return Promise.all([r.e(216),r.e(68),r.e(630)]).then(r.bind(r,29630))})),de=n.lazy((function(){return r.e(240).then(r.bind(r,3240))})),me=n.lazy((function(){return Promise.all([r.e(216),r.e(874)]).then(r.bind(r,16874))})),fe=n.createContext({}),pe=function(e,t){return(0,d.J1)({start_prev_date:l().any().label("Data de Início"),end_prev_date:l().any().label("Data de Fim")},e,t).unknown(!0)},ge=function(){var e=ie(regeneratorRuntime.mark((function e(t,r){var n,a,o,i,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.iorder,a=t.item,o=t.cliente_cod,i=t.ofabrico,e.next=3,(0,c.SD)({url:"".concat(u.T5,"/tempofabricoget/"),filter:{of_id:i,item_cod:a,cliente_cod:o,order_cod:n},cancelToken:r});case 3:return l=e.sent,s=l.data.rows,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();const be=function(e){var t=e.record,r=e.setFormTitle,a=e.parentRef,o=e.closeParent,i=re(F.Z.useForm(),1)[0],l=re((0,n.useState)(!0),2),s=l[0],f=l[1],p=re((0,n.useState)({}),2),g=p[0],b=p[1],v=(0,n.useRef)(!1),y=re((0,n.useState)("1"),2),h=y[0],w=y[1],k=re((0,n.useState)({}),2),Z=(k[0],k[1]),I=re((0,n.useState)({}),2),D=I[0],N=I[1],R=re((0,n.useState)({}),2),z=R[0],T=R[1],q=re((0,n.useState)({}),2),L=q[0],V=q[1],M=re((0,n.useState)({}),2),B=M[0],W=M[1],Y=re((0,n.useState)({}),2),H=Y[0],U=Y[1],G=re((0,n.useState)({}),2),K=G[0],Q=G[1],X=re((0,n.useState)({}),2),ne=X[0],ae=X[1],oe=re((0,n.useState)({}),2),be=oe[0],ve=oe[1],ye=re((0,n.useState)({error:[],warning:[],info:[],success:[]}),2),he=ye[0],we=ye[1],Ee=re((0,n.useState)(!1),2),_e=Ee[0],xe=Ee[1],Oe=re((0,n.useState)({status:"none"}),2),Se=Oe[0],ke=Oe[1],Fe={agg_id:t.temp_ofabrico_agg,of_id:t.temp_ofabrico,of_cod:t.ofabrico,produto_id:t.produto_id,produto_cod:t.produto_cod,item_id:t.item_id,item_cod:t.item,item_nome:t.item_nome,order:t.iorder,cliente_cod:t.cliente_cod,cliente_nome:t.cliente_nome,qty_item:t.qty_item,sage_start_date:t.start_date,sage_end_date:t.end_date,fieldStatus:g,setFieldStatus:b,form:i,guides:_e,schema:pe};(0,n.useEffect)((function(){var e=(0,c.BO)();return r({title:"Validar Ordem de Fabrico ".concat(t.ofabrico),subTitle:"".concat(t.item," - ").concat(t.item_nome)}),ie(regeneratorRuntime.mark((function r(){var n,a,o,l,c,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ge(t,e);case 2:l=r.sent,c=re(l,1),u=ee(ee({},u=c[0]),{},{core_cod:{key:null===(n=u)||void 0===n?void 0:n.core_cod,value:null===(a=u)||void 0===a?void 0:a.core_cod,label:null===(o=u)||void 0===o?void 0:o.core_des}}),i.setFieldsValue(ee(ee({},u),{},{nbobines:(t.qty_item/u.sqm_bobine).toFixed(2)})),f(!1);case 8:case"end":return r.stop()}}),r)})))(),function(){return e.cancel("Form OFabrico Validar Cancelled")}}),[]);var Pe=function(){var e=ie(regeneratorRuntime.mark((function e(r){var n,a,o,l,s,m,f,p,g,y,h,w,E,_,x,O,S,k,F,P,j,C,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.current,v.current=!1,l={error:[],warning:[],info:[],success:[]},s=["start_prev_date","end_prev_date"],m=t.cliente_cod,f=t.cliente_nome,p=t.iorder,g=t.item,y=t.ofabrico,h=t.produto_id,w=t.item_id,E=r.core_cod,_=(E=void 0===E?{}:E).value,x=E.label,O=i.getFieldsValue(!0),S=O.cortes_id,k=O.cortesordem_id,F={},P=pe().custom((function(e,t){var r=e.start_prev_date,n=e.end_prev_date;if(1==(F=(0,d.FU)(r,n)).errors)return t.message("A Data de Fim tem de ser Maior que a Data de Início",{key:"start_date",label:"start_date"})})).validate(r,{abortEarly:!1}),l.error=[].concat($(l.error),$(P.error?null===(n=P.error)||void 0===n?void 0:n.details.filter((function(e){return s.includes(e.context.key)})):[])),l.warning=[].concat($(l.warning),$(P.warning?null===(a=P.warning)||void 0===a?void 0:a.details.filter((function(e){return s.includes(e.context.key)})):[])),P.error,0!==l.error.length){e.next=21;break}return j=r.start_prev_date,C=r.end_prev_date,e.next=19,(0,c.SD)({url:"".concat(u.T5,"/savetempordemfabrico/"),parameters:ee(ee({},r),{},{forproduction:o,qty_item:t.qty_item,start_prev_date:j.format("YYYY-MM-DD HH:mm:ss"),end_prev_date:C.format("YYYY-MM-DD HH:mm:ss"),cliente_cod:m,cliente_nome:f,iorder:p,item:g,item_id:w,ofabrico:y,core_cod:_,core_des:x,produto_id:h,cortes_id:S,cortesordem_id:k})});case 19:A=e.sent,ke(A.data);case 21:b(F.fields),we(l);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){o()};return n.createElement(n.Fragment,null,n.createElement(P.Z,{spinning:s,indicator:n.createElement(A.Z,{style:{fontSize:24},spin:!0}),tip:"A carregar..."},n.createElement(O.Z,{result:Se,successButtonOK:n.createElement(j.Z,{type:"primary",key:"goto-of",onClick:function(){ke({status:"none"})}},"Continuar"),successButtonClose:n.createElement(j.Z,{key:"goto-close",onClick:function(){return je(!0)}},"Fechar"),errorButtonOK:n.createElement(j.Z,{type:"primary",key:"goto-ok",onClick:function(){ke({status:"none"})}},"OK"),errorButtonClose:n.createElement(j.Z,{key:"goto-close",onClick:je},"Fechar")},n.createElement(m.NH,{id:"el-external"}),n.createElement(x.Z,{formStatus:he}),n.createElement(fe.Provider,{value:Fe},n.createElement(F.Z,{form:i,name:"form-of-validar",onFinish:Pe,onValuesChange:function(e,t){"paletizacao_id"in e?Z(e):"formulacao_id"in e?N(e):"gamaoperatoria_id"in e?T(e):"artigospecs_id"in e?V(e):"nonwovens_id"in e?W(e):"core_id"in e?U(e):"agg_id"in e?ae(e):"cortesordem_id"in e||"cortes"in e?ve(e):Q(e)}},n.createElement(_,te({onChange:function(){},type:"card",dark:1,defaultActiveKey:"1",activeKey:h},"onChange",(function(e){return w(e)})),n.createElement(E,{tab:"Requisitos",key:"1",forceRender:!0},n.createElement(J,{changedValues:K})),n.createElement(E,{tab:"Ordens Fabrico",key:"2"},n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(se,{changedValues:ne}))),n.createElement(E,{tab:"Nonwovens e Core",key:"8"},n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(de,{nwChangedValues:B,coreChangedValues:H}))),n.createElement(E,{tab:"Especificações",key:"3"},n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(ue,{changedValues:L}))),n.createElement(E,{tab:"Formulação",key:"4"},n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(le,{changedValues:D}))),n.createElement(E,{tab:"Gama Operatória",key:"5"},n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(ce,{changedValues:z}))),n.createElement(E,{tab:"Cortes",key:"7"},n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(me,{changedValues:be}))))))),n.createElement(S.Z,{elId:a.current},n.createElement(C.Z,null,n.createElement(j.Z,{type:"primary",onClick:function(){v.current=!0,i.submit()}},"Submeter para Produção"),n.createElement(j.Z,{onClick:function(){return i.submit()}},"Guardar Ordem de Fabrico"),n.createElement(j.Z,{onClick:function(){return xe(!_e)}},_e?"No Guides":"Guides")))))}}}]);