"use strict";(self.webpackChunksgp=self.webpackChunksgp||[]).push([[772],{84772:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ce});r(35666),r(66992),r(41539),r(88674),r(78783),r(33948),r(74916),r(15306),r(27207),r(60285),r(41637),r(32564),r(47042),r(5735),r(83753),r(83710),r(65069),r(23123),r(26699),r(32023),r(23157),r(33161),r(9653),r(54678),r(92222),r(79753),r(82526),r(41817),r(32165),r(68309),r(91038),r(69070),r(47941),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321);var n=r(67294),a=r(27484),l=r.n(a),o=r(42705),i=r.n(o),c=r(42919),s=r(23455),u=r(84636),d=r(63386),m=r(10438),f=r(58043),p=r(28479),g=r(75935),b=r(16403),E=r(96579),h=r(5368),v=r(7171),w=(r(55902),r(2306),r(54397)),y=r(94184),x=r.n(y),_=r(22262);(0,_.QM)({progress:{height:"8px",width:"100%",overflow:"hidden",marginTop:"10px",backgroundColor:"#f5f5f5",borderRadius:"2px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.1)","& span":{position:"absolute",display:"block",width:"100%",color:"black"},"& .progress-bar":{float:"left",width:"0",height:"100%",color:"#fff",textAlign:"center",backgroundColor:"#91d5ff",boxShadow:"inset 0 -5px 0 rgb(0 0 0 / 15%)","& .show":{fontSize:"11px",marginTop:"-16px",display:"block!important"}},"& .progress-bar-success":{boxShadow:"inset 0 -5px 0 rgb(0 0 0 / 15%)",backgroundColor:"#389e0d"}}});r(82772),r(44405);(0,_.QM)({svg:{cursor:"pointer",verticalAlign:"middle","& path":{stroke:"#0050b3",strokeWidth:"2px"},"&:active":{transform:"scale(0.8)",boxShadow:"1px 1px 5px rgba(0, 0, 0, 0.24)"},"&:hover":{"& path":{stroke:"#1890ff",strokeWidth:"2px"}}}});r(19601);var S=r(60331),k=["className","children"];function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}function C(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var A=(0,_.QM)({tag:{cursor:"pointer","&:active":{transform:"scale(0.9)",boxShadow:"1px 1px 5px rgba(0, 0, 0, 0.24)"},"&:hover":{opacity:.8}}});const Z=function(e){var t=e.className,r=e.children,a=C(e,k),l=A(),o=x()(t,l.tag);return n.createElement(S.Z,F({className:o},a),r)};var O=r(96974),P=r(75950),I=r(85144),D=r(42239),z=r(40074),N=r(71577),L=r(60881),R=r(19650),T=r(92080),q=r(60816),j=r(16114),M=r(32787),W=r(61580),U=r(76772),B=r(11382),V=r(93194),J=r(69953),K=r(33381),G=r(9609),H=r(76570),Q=r(57254),Y=r(57119),$=r(68628),X=r(79508),ee=r(34707),te=r(25592),re=r(7085);function ne(e,t,r,n,a,l,o){try{var i=e[l](o),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){ne(l,n,a,o,i,"next",e)}function i(e){ne(l,n,a,o,i,"throw",e)}o(void 0)}))}}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,l=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return l}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var de=n.lazy((function(){return Promise.all([r.e(216),r.e(402),r.e(641),r.e(709)]).then(r.bind(r,36904))})),me=n.lazy((function(){return Promise.all([r.e(216),r.e(30)]).then(r.bind(r,54030))})),fe=(D.Z.Option,z.Z.confirm,N.Z.Group),pe=L.Z.Title,ge=function(e,t){return(0,d.J1)({},e,t).unknown(!0)},be=function(e){return(0,d.J1)({},e).unknown(!0)},Ee=function(e){var t=e.ordersField,r=e.customersField,n=e.itemsField;return[{f_ofabrico:{label:"Ordem de Fabrico"}},{f_agg:{label:"Agregação Ordem de Fabrico"}},{fofstatus:{label:"Estado",field:e.ordemFabricoStatusField,initialValue:"Todos",ignoreFilterTag:function(e){return"Todos"===e}}},{fmulti_order:{label:"Nº Encomenda/Nº Proforma",field:t}},{fmulti_customer:{label:"Nº/Nome de Cliente",field:r}},{fmulti_item:{label:"Cód/Designação Artigo",field:n}},{forderdate:{label:"Data Encomenda",field:{type:"rangedate",size:"small"}}},{fstartprevdate:{label:"Data Prevista Início",field:{type:"rangedate",size:"small"}}},{fendprevdate:{label:"Data Prevista Fim",field:{type:"rangedate",size:"small"}}}]},he=function(e){var t=e.form,r=(e.dataAPI,e.setFlyoutStatus,e.flyoutStatus,e.ordemFabricoStatusField),a=n.createElement(n.Fragment,null),l=n.createElement(R.Z,null,n.createElement("div",{style:{display:"flex",flexDirection:"row",whiteSpace:"nowrap"}}),n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap"}},n.createElement(T.Z,{form:t,initialValues:{fofstatus:"Todos"}},n.createElement(p.lt,{id:"tbt-of",schema:ge},n.createElement(p.gN,{name:"fofstatus",label:{enabled:!0,width:"60px",text:"Estado",pos:"left"}},r({onChange:function(){t.submit()}}))))));return n.createElement(E.Z,{left:a,right:l})},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.form,r=e.dataAPI,a=e.columns,l=e.setShowFilter,o=e.showFilter,i=e.ordemFabricoStatusField,u=(0,n.useState)({}),d=ce(u,2),f=(d[0],d[1],(0,n.useState)(!1)),g=ce(f,2),b=g[0],E=g[1],h=function(){var e,n,a,l,o,i,c,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"filter",d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==d&&(d=t.getFieldsValue(!0)),"filter"===u){!b&&E(!0);var f=oe(oe({},d),{},{f_ofabrico:(0,m.B8)(null===(e=d)||void 0===e?void 0:e.f_ofabrico,"any"),f_agg:(0,m.B8)(null===(n=d)||void 0===n?void 0:n.f_agg,"any"),fmulti_customer:(0,m.B8)(null===(a=d)||void 0===a?void 0:a.fmulti_customer,"any"),fmulti_order:(0,m.B8)(null===(l=d)||void 0===l?void 0:l.fmulti_order,"any"),fmulti_item:(0,m.B8)(null===(o=d)||void 0===o?void 0:o.fmulti_item,"any"),forderdate:(0,m.TK)(null===(i=d.forderdate)||void 0===i?void 0:i.formatted),fstartprevdate:(0,m.TK)(null===(c=d.fstartprevdate)||void 0===c?void 0:c.formatted),fendprevdate:(0,m.TK)(null===(s=d.fendprevdate)||void 0===s?void 0:s.formatted)});r.addFilters(f),r.first(),r.fetchPost()}},w=function(e,r,n){if("filter"===e)t.setFieldsValue(n)},y=function(){var e=ae(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.SD)({url:"".concat(s.T5,"/sellcustomerslookup/"),pagination:{limit:10},filter:ie({},"fmulti_customer","%".concat(t.replaceAll(" ","%%"),"%"))});case 2:return r=e.sent,n=r.data.rows,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=ae(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.SD)({url:"".concat(s.T5,"/sellorderslookup/"),pagination:{limit:10},filter:ie({},"fmulti_order","%".concat(t.replaceAll(" ","%%"),"%"))});case 2:return r=e.sent,n=r.data.rows,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=ae(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.SD)({url:"".concat(s.T5,"/sellitemslookup/"),pagination:{limit:10},filter:ie({},"fmulti_item","%".concat(t.replaceAll(" ","%%"),"%"))});case 2:return r=e.sent,n=r.data.rows,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){return n.createElement(p.K1,{placeholder:"Cliente",size:"small",keyField:"BPCNAM_0",textField:"BPCNAM_0",dropdownMatchSelectWidth:250,allowClear:!0,onPressEnter:h,fetchOptions:y})},k=function(){return n.createElement(p.K1,{placeholder:"Encomenda/Prf",size:"small",keyField:"SOHNUM_0",textField:"computed",dropdownMatchSelectWidth:250,allowClear:!0,fetchOptions:x})},F=function(){return n.createElement(p.K1,{placeholder:"Artigo",size:"small",keyField:"ITMREF_0",textField:"computed",dropdownMatchSelectWidth:250,allowClear:!0,fetchOptions:_})},C=function(e,t,r,n){var a=new Blob(void 0!==n?[n,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var l=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(a):window.webkitURL.createObjectURL(a),o=document.createElement("a");o.style.display="none",o.href=l,o.setAttribute("download",t),void 0===o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(l)}),200)}},A=n.createElement(q.Z,{onClick:function(e){return Z(e)}},n.createElement(q.Z.Item,{key:"pdf",icon:n.createElement(V.Z,{twoToneColor:"red"})},"Pdf"),n.createElement(q.Z.Item,{key:"excel",icon:n.createElement(J.Z,{twoToneColor:"#52c41a"})},"Excel"),n.createElement(q.Z.Item,{key:"word",icon:n.createElement(K.Z,null)},"Word")),Z=function(){var e=ae(regeneratorRuntime.mark((function e(t){var n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=r.getPostRequest()).parameters=oe(oe({},n.parameters),{},{config:"default",orientation:"landscape",template:"TEMPLATES-LIST/LIST-A4-${orientation}",title:"Ordens de Fabrico",export:t.key,cols:a}),e.next=4,(0,c.n3)(n);case 4:l=e.sent,e.t0=t.key,e.next="pdf"===e.t0?8:"excel"===e.t0?10:"word"===e.t0?12:14;break;case 8:return C(l.data,"list-".concat((new Date).toJSON().slice(0,10),".pdf")),e.abrupt("break",14);case 10:return C(l.data,"list-".concat((new Date).toJSON().slice(0,10),".xlsx")),e.abrupt("break",14);case 12:return C(l.data,"list-".concat((new Date).toJSON().slice(0,10),".docx")),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(p.fS,{schema:Ee({form:t,ordersField:k,customersField:S,itemsField:F,ordemFabricoStatusField:i}),filterRules:be(),form:t,width:350,setShowFilter:l,showFilter:o}),n.createElement(T.Z,{form:t,name:"fps",onFinish:function(e){return h("filter",e)},onValuesChange:w},n.createElement(p.lt,{id:"LAY-OFFLIST",layout:"horizontal",style:{width:"700px",padding:"0px"},schema:ge,field:{guides:!1,wide:[3,3,3,4,1.5,1.5],style:{marginLeft:"2px",alignSelf:"end"}},fieldSet:{guides:!1,wide:16,margin:!1,layout:"horizontal",overflow:!1}},n.createElement(p.gN,{name:"fmulti_customer",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Cliente",pos:"top"}},S()),n.createElement(p.gN,{name:"fmulti_order",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Encomenda/Prf",pos:"top"}},k()),n.createElement(p.gN,{name:"fmulti_item",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Artigo",pos:"top"}},F()),n.createElement(p.gN,{name:"forderdate",required:!1,layout:{center:"align-self:center;",right:"align-self:center;"},label:{enabled:!0,text:"Data Encomenda",pos:"top"}},n.createElement(p.P,{size:"small"})),n.createElement(p.mZ,{label:{enabled:!1}},n.createElement(fe,{size:"small",style:{marginLeft:"5px"}},n.createElement(N.Z,{style:{padding:"0px 3px"},onClick:function(){return t.submit()}},n.createElement(H.Z,null)),n.createElement(N.Z,{style:{padding:"0px 3px"}},n.createElement(v.Z,{style:{fontSize:"16px",marginTop:"2px"},onClick:function(){return l((function(e){return!e}))}})))),n.createElement(p.mZ,{label:{enabled:!1}},n.createElement(j.Z,{overlay:A},n.createElement(N.Z,{size:"small",icon:n.createElement(G.Z,null)},n.createElement(Q.Z,null)))))))},we=function(e,t){return(0,d.J1)({produto_cod:i().string().label("Designação do Produto").required(),artigo_formu:i().string().label("Fórmula").required(),artigo_nw1:i().string().label("Nonwoven 1").required(),artigo_width:i().number().integer().min(1).max(5e3).label("Largura").required(),artigo_diam:i().number().integer().min(1).max(5e3).label("Diâmetro").required(),artigo_core:i().number().integer().valid(3,6).label("Core").required(),artigo_gram:i().number().integer().min(1).max(1e3).label("Gramagem").required(),artigo_thickness:i().number().integer().min(0).max(5e3).label("Espessura").required()},e,t).unknown(!0)},ye=function(e){e.status;var t=e.action,r=e.ofabrico;return n.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"}},n.createElement("div",null,n.createElement(Y.Z,{style:{color:"#faad14"}})),n.createElement("div",{style:{fontSize:"14px",display:"flex",flexDirection:"column"}},n.createElement("div",null,n.createElement("b",{style:{textTransform:"capitalize"}},t)," Ordem de Fabrico?"),n.createElement("div",{style:{color:"#1890ff"}},r)))},xe=function(e){e.status,e.temp_ofabrico,e.cliente_cod;var t=e.cliente_nome,r=e.iorder,a=e.item,l=e.item_nome,o=(e.ofabrico,e.produto_id),i=e.produto_cod;e.action;return o?n.createElement("div",null,"Confirmar a Ordem de Fabrico:",n.createElement("ul",null,n.createElement("li",null,"Produto ",n.createElement("b",null,i)),n.createElement("li",null,"Artigo ",n.createElement("b",null,a)),n.createElement("li",null,"Des.Artigo ",n.createElement("b",null,l)),r&&n.createElement("li",null,"Encomenda ",n.createElement("b",null,r)),r&&n.createElement("li",null,"Cliente ",n.createElement("b",null,t)))):n.createElement(n.Fragment,null,n.createElement("ul",null,n.createElement("li",null," Artigo ",n.createElement("b",null,a)),n.createElement("li",null,"Des.Artigo ",n.createElement("b",null,l)),r&&n.createElement("li",null,"Encomenda ",n.createElement("b",null,r)),r&&n.createElement("li",null,"Cliente ",n.createElement("b",null,t))),n.createElement("div",null,"Para Validar a Ordem de Fabrico tem de Confirmar/Preencher os seguintes dados:"),n.createElement(p.qL,null),n.createElement(p.lt,{id:"LAY-PROD",guides:!1,layout:"vertical",style:{width:"100%",padding:"0px"},schema:we,fieldStatus:{},field:{forInput:!0,wide:[16],alert:{pos:"right",tooltip:!0,container:!1}},fieldSet:{guides:!1,wide:16}},n.createElement(p.C3,null,n.createElement(p.gN,{name:"produto_cod",label:{enabled:!1}},n.createElement(M.Z,{placeholder:"Designação do Produto",size:"small"}))),n.createElement(p.C3,{field:{wide:[4,4,4,4],margin:"2px"}},n.createElement(p.gN,{required:!1,label:{text:n.createElement(W.Z,{title:"O código Gtin se deixado em branco será calculado automáticamente",color:"blue"},n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"3px"}},"Gtin",n.createElement($.Z,{style:{color:"#096dd9"}})))},name:"artigo_gtin"},n.createElement(M.Z,{size:"small"})),n.createElement(p.gN,{required:!0,label:{text:"Fórmula"},name:"artigo_formu"},n.createElement(M.Z,{size:"small"})),n.createElement(p.gN,{required:!0,label:{text:"Nw1"},name:"artigo_nw1"},n.createElement(M.Z,{size:"small"})),n.createElement(p.gN,{required:!1,label:{text:"Nw2"},name:"artigo_nw2"},n.createElement(M.Z,{size:"small"}))),n.createElement(p.C3,{field:{wide:[3,3,3,3,3,"*"]}},n.createElement(p.gN,{required:!0,label:{text:"Largura"},name:"artigo_width"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(p.gN,{required:!0,label:{text:"Diâmetro"},name:"artigo_diam"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(p.gN,{required:!0,label:{text:"Core"},name:"artigo_core"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"''"),maxLength:1})),n.createElement(p.gN,{required:!0,label:{text:"Gramagem"},name:"artigo_gram"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"mm"),maxLength:4})),n.createElement(p.gN,{required:!0,label:{text:n.createElement(W.Z,{title:"A espessura é usada como valor de referência, na conversão de metros² -> metros lineares.",color:"blue"},n.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"3px"}},"Espessura",n.createElement($.Z,{style:{color:"#096dd9"}})))},name:"artigo_thickness"},n.createElement(p.ID,{size:"small",addonAfter:n.createElement("b",null,"µ"),maxLength:4})))))},_e=function(e){var t=e.showConfirm,r=e.setShowConfirm,a=ce(T.Z.useForm(),1)[0],l=ce(n.useState(!1),2),o=l[0],i=(l[1],ce(n.useState("Content of the modal"),2)),c=(i[0],i[1],t.data),u=c.status,d=(c.temp_ofabrico,c.cliente_cod,c.cliente_nome,c.iorder,c.item,c.item_nome),m=c.ofabrico,f=c.produto_id,p=(c.produto_cod,c.action),g=c.onAction,b=ce((0,n.useState)({}),2),E=b[0],h=b[1];(0,n.useEffect)((function(){if(!f&&m){var e,t={artigo_thickness:s.pR,produto_cod:void 0,artigo_gtin:void 0,artigo_core:void 0,artigo_formu:void 0,artigo_nw1:void 0,artigo_nw2:void 0,artigo_width:void 0,artigo_diam:void 0,artigo_gram:void 0},r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=se(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw l}}}}(d.split(" ").reverse());try{for(r.s();!(e=r.n()).done;){var n=e.value;n.includes("''")||n.includes("'")?t.artigo_core=n.replaceAll("'",""):n.toUpperCase().startsWith("H")?t.artigo_formu=n.toUpperCase():n.toUpperCase().startsWith("ELA-")?t.artigo_nw1=n.toUpperCase():n.toLowerCase().startsWith("l")?t.artigo_width=n.toLowerCase().replaceAll("l",""):n.toLowerCase().startsWith("d")?t.artigo_diam=n.toLowerCase().replaceAll("d",""):(n.toLowerCase().startsWith("g")||!isNaN(n)&&Number.isInteger(parseFloat(n)))&&(t.artigo_gram=n.toLowerCase().replaceAll("g",""))}}catch(e){r.e(e)}finally{r.f()}h({}),a.setFieldsValue(oe({},t))}}),[m]);var v=function(){var e=ae(regeneratorRuntime.mark((function e(n){var l,o,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ignorar"!==a.getFieldValue("type")||!m){e.next=6;break}return e.next=3,g(t.data,"ignorar");case 3:i=e.sent,e.next=17;break;case 6:if(f||!m){e.next=14;break}if((c=we().validate(n,{abortEarly:!1})).error){e.next=12;break}return e.next=11,g(t.data,p,oe(oe({},n),{},{artigo_nome:d,main_gtin:s.qW}));case 11:i=e.sent;case 12:e.next=17;break;case 14:return e.next=16,g(t.data,p);case 16:i=e.sent;case 17:"error"===(null===(l=i)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.status)?h({error:[{message:i.data.title}]}):null!==(u=c)&&void 0!==u&&u.error||r({show:!1,data:{}});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"validar";a.setFieldsValue({type:e}),a.submit()};return n.createElement(n.Fragment,null,n.createElement(z.Z,{title:n.createElement(ye,{status:u,action:p,ofabrico:m}),visible:t.show,centered:!0,confirmLoading:o,maskClosable:!1,footer:[n.createElement(N.Z,{key:"1",danger:!0,type:"primary",onClick:function(){return y("ignorar")}},"Ignorar"),n.createElement(N.Z,{key:"2",onClick:function(){r({show:!1,data:{}})}},"Cancelar"),n.createElement(N.Z,{key:"3",type:"primary",onClick:y},"Validar")]},n.createElement(T.Z,{form:a,name:"fpi",onFinish:v,component:"form"},n.createElement(w.Z,{formStatus:E}),n.createElement(xe,t.data))))},Se=function(e){var t=e.record,r=e.onAction,a=(e.showConfirm,e.setShowConfirm),l=(e.showMenuActions,e.setShowMenuActions),o=t.status,i=t.temp_ofabrico,c=ce((0,n.useState)(),2),s=(c[0],c[1],function(){var e=t.status,n=t.cod,a=t.temp_ofabrico_agg;l({show:!0,data:{status:e,aggCod:n,aggId:a,onAction:r}})});return n.createElement("div",{style:{display:"flex",flexDirection:"row"}},(0==o||!o)&&!i&&n.createElement(n.Fragment,null,n.createElement(Z,{onClick:function(){return function(e){var n=t.status,l=t.temp_ofabrico,o=t.cliente_cod,i=t.cliente_nome,c=t.iorder,s=t.item,u=t.item_nome,d=t.ofabrico,m=t.produto_id,f=t.produto_cod,p=t.qty_item,g=t.item_thickness,b=t.item_diam,E=t.item_core,h=t.item_width,v=t.item_id;a({show:!0,data:{status:n,temp_ofabrico:l,cliente_cod:o,cliente_nome:i,iorder:c,item:s,item_nome:u,ofabrico:d,produto_id:m,produto_cod:f,action:e,qty_item:p,item_thickness:g,item_diam:b,item_core:E,item_width:h,item_id:v,onAction:r}})}("validar")},style:{width:"98px",textAlign:"center"},icon:n.createElement(X.Z,null),color:"#108ee9"},"Validar")),(1==o||!o)&&i&&n.createElement(n.Fragment,null,n.createElement(Z,{onClick:function(){return r(t,"inpreparation",(function(){}))},style:{width:"110px",textAlign:"center"},icon:n.createElement(ee.Z,null),color:"warning"},"Em Elaboração")),2==o&&i&&n.createElement(n.Fragment,null,n.createElement(Z,{onClick:function(){return s()},style:{width:"110px",textAlign:"center"},icon:n.createElement(ee.Z,null),color:"orange"},"Na Produção")),3==o&&n.createElement(n.Fragment,null,n.createElement(Z,{onClick:function(){return s()},style:{width:"105px",textAlign:"center"},icon:n.createElement(te.Z,{spin:!0}),color:"success"},"Em Produção")),9==o&&n.createElement(n.Fragment,null,n.createElement(S.Z,{style:{width:"98px",textAlign:"center"},color:"error"},"Finalizada")))},ke=function(e){var t=e.aggCod,r=(0,n.useContext)(I.Jb),a=(0,O.s0)();(0,n.useEffect)((function(){}),[r]);var l=function(){a("/app/validateReellings",{state:{}})};return n.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center"}},n.createElement("div",{style:{fontSize:"14px",display:"flex",flexDirection:"row",alignItems:"center"}},n.createElement(R.Z,null,n.createElement("div",null,n.createElement("b",{style:{textTransform:"capitalize"}}),t),null!==r&&n.createElement(U.Z,{onClick:l,style:{cursor:"pointer",padding:"1px 15px"},message:n.createElement("div",null,n.createElement("span",{style:{fontSize:"14px",fontWeight:700}},JSON.parse(r.data).cnt)," Bobinagens por ",n.createElement(N.Z,{size:"small",style:{paddingLeft:"0px"},onClick:l,type:"link"},"Validar.")),type:"warning",showIcon:!0}))))},Fe=function(e){var t=e.showMenuActions,r=e.setShowMenuActions,a=(ce(T.Z.useForm(),1)[0],ce(n.useState(!1),2)),l=a[0],o=(a[1],ce(n.useState("Content of the modal"),2)),i=(o[0],o[1],t.data),c=i.aggId,s=i.aggCod,u=ce((0,n.useState)({}),2);u[0],u[1];(0,n.useEffect)((function(){}),[]);return n.createElement(n.Fragment,null,n.createElement(z.Z,{title:n.createElement(ke,{aggCod:s}),visible:t.show,centered:!0,onCancel:function(){r({show:!1,data:{}})},confirmLoading:l,maskClosable:!0,footer:null,destroyOnClose:!0,bodyStyle:{height:"800px",backgroundColor:"#f0f0f0"},width:"90%"},n.createElement(P.Z,null,n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(me,{aggId:c})))))};const Ce=function(){var e=ce((0,n.useState)(!1),2),t=e[0],r=e[1],a=ce((0,n.useState)([]),2),o=a[0],i=a[1],d=ce((0,n.useState)(!1),2),E=d[0],v=d[1],w=ce((0,n.useState)({show:!1}),2),y=w[0],x=w[1],_=ce(T.Z.useForm(),1)[0],S=(0,u.E)({payload:{url:"".concat(s.T5,"/ofabricolist/"),parameters:{},pagination:{enabled:!0,page:1,pageSize:10},filter:{},sort:[{column:"ofabrico",direction:"DESC"}]}}),k=document.getElementById("filter-tags"),F=ce((0,n.useState)({visible:!1,fullscreen:!1}),2),C=F[0],A=F[1],Z=((0,n.useRef)(),ce((0,n.useState)(!1),2)),O=(Z[0],Z[1],ce((0,n.useState)({show:!1,data:{}}),2)),P=O[0],I=O[1],D=ce((0,n.useState)({show:!1,data:{}}),2),z=D[0],N=D[1];(0,n.useEffect)((function(){var e=(0,c.BO)();return S.first(),S.fetchPost({token:e}),function(){return e.cancel()}}),[]);var L,R=function(){var e=ae(regeneratorRuntime.mark((function e(t,n,a){var l,o,i,u,d,m,f,p,g,b,E,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=t.cliente_cod,o=t.cliente_nome,i=t.iorder,u=t.item,d=t.ofabrico,m=t.produto_id,f=t.qty_item,p=t.item_diam,g=t.item_core,b=t.item_thickness,E=t.item_width,h=t.item_id,e.t0=n,e.next="validar"===e.t0?4:"ignorar"===e.t0?11:"inpreparation"===e.t0?18:"reabrir"===e.t0?20:"iniciar"===e.t0?22:"finalizar"===e.t0?24:"suspender"===e.t0?26:28;break;case 4:return r(!0),e.next=7,(0,c.SD)({url:"".concat(s.T5,"/savetempordemfabrico/"),parameters:{cliente_cod:l,cliente_nome:o,iorder:i,item:u,ofabrico_cod:d,produto_id:m,artigo:a,qty_item:f,artigo_diam:p,artigo_core:g,artigo_width:E,item_id:h,artigo_thickness:b}});case 7:case 14:return"error"!==(v=e.sent).data.status&&S.fetchPost(),r(!1),e.abrupt("return",v);case 11:return r(!0),e.next=14,(0,c.SD)({url:"".concat(s.T5,"/ignorarordemfabrico/"),parameters:{ofabrico:d}});case 18:return x((function(e){return oe(oe({},e),{},{show:!e.show,record:t})})),e.abrupt("break",28);case 20:case 22:case 24:case 26:return e.abrupt("break",28);case 28:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),q=(0,b.B)({dataAPI:S,data:S.getData().rows,uuid:"ofabricolist",include:oe({},(L={idx:1,optional:!1},{cod:oe({title:"Agg",width:140,render:function(e){return n.createElement("span",{style:{color:"#096dd9"}},e)}},L),ofabrico:oe({title:"Ordem Fabrico",width:140,render:function(e){return n.createElement("b",null,e)}},L),prf:oe({title:"PRF",width:140,render:function(e){return n.createElement("b",null,e)}},L),iorder:oe({title:"Encomenda(s)",width:140},L),estado:oe({title:"",width:125,render:function(e,t){return n.createElement(Se,{record:t,showMenuActions:z,setShowMenuActions:N,showConfirm:P,setShowConfirm:I,onAction:R})}},L),item_nome:oe({title:"Artigo(s)",ellipsis:!0,render:function(e){return n.createElement("div",{style:{whiteSpace:"nowrap"}},e)}},L),cliente_nome:oe({title:"Cliente(s)",ellipsis:!0,render:function(e){return n.createElement("div",{style:{whiteSpace:"nowrap"}},n.createElement("b",null,e))}},L),start_date:oe({title:"Início Previsto",ellipsis:!0,render:function(e,t){return n.createElement("div",{style:{whiteSpace:"nowrap"}},n.createElement("span",null,l()(t.start_prev_date?t.start_prev_date:e).format(s.Cu)))}},L),end_date:oe({title:"Fim Previsto",ellipsis:!0,render:function(e,t){return n.createElement("div",{style:{whiteSpace:"nowrap"}},n.createElement("span",null,t.end_prev_date&&l()(t.end_prev_date).format(s.Cu)))}},L)})),exclude:[]}),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange;return n.createElement(p.mg,{onChange:t,keyField:"value",valueField:"label",style:{width:150},options:[{value:"Todos",label:"Todos"},{value:"Por Validar",label:"Por validar"},{value:"Em Elaboração",label:"Em Elaboração"},{value:"Na Produção",label:"Na Produção"},{value:"Em Produção",label:"Em Produção"},{value:"Finalizada",label:"Finalizada"}]})};return n.createElement(n.Fragment,null,n.createElement(B.Z,{spinning:t,indicator:n.createElement(re.Z,{style:{fontSize:24},spin:!0}),style:{top:"50%",left:"50%",position:"absolute"}},n.createElement(Fe,{showMenuActions:z,setShowMenuActions:N}),n.createElement(_e,{showConfirm:P,setShowConfirm:I}),n.createElement(n.Suspense,{fallback:n.createElement(n.Fragment,null)},n.createElement(g.Z,{showWrapper:y,setShowWrapper:x,parentReload:S.fetchPost},n.createElement(de,null))),n.createElement(he,{form:_,dataAPI:S,setFlyoutStatus:A,flyoutStatus:C,ordemFabricoStatusField:j}),k&&n.createElement(h.Z,{elId:k},n.createElement(f.WH,{form:_,filters:S.getAllFilter(),schema:Ee,rules:be()})),n.createElement(b.Z,{title:n.createElement(pe,{level:4},"Ordens de Fabrico"),columnChooser:!1,reload:!0,stripRows:!0,darkHeader:!0,size:"small",toolbar:n.createElement(ve,{columns:null==q?void 0:q.report,form:_,dataAPI:S,setShowFilter:v,showFilter:E,ordemFabricoStatusField:j}),selection:{enabled:!1,rowKey:function(e){return function(e){return"".concat(e.ofabrico,"-").concat((0,m.wh)(e.item,void 0),"-").concat((0,m.wh)(e.iorder,void 0))}(e)},onSelection:i,multiple:!1,selectedRows:o,setSelectedRows:i},paginationProps:{pageSizeOptions:[10,15,20,30]},dataAPI:S,columns:q,onFetch:S.fetchPost})))}}}]);
//# sourceMappingURL=8e70d968144cdeac3eb0.chunk.js.map